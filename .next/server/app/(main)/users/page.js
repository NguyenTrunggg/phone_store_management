(()=>{var e={};e.id=386,e.ids=[386],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},84770:e=>{"use strict";e.exports=require("crypto")},80665:e=>{"use strict";e.exports=require("dns")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},35816:e=>{"use strict";e.exports=require("process")},76162:e=>{"use strict";e.exports=require("stream")},74026:e=>{"use strict";e.exports=require("string_decoder")},82452:e=>{"use strict";e.exports=require("tls")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},98061:e=>{"use strict";e.exports=require("node:assert")},92761:e=>{"use strict";e.exports=require("node:async_hooks")},72254:e=>{"use strict";e.exports=require("node:buffer")},40027:e=>{"use strict";e.exports=require("node:console")},6005:e=>{"use strict";e.exports=require("node:crypto")},65714:e=>{"use strict";e.exports=require("node:diagnostics_channel")},15673:e=>{"use strict";e.exports=require("node:events")},88849:e=>{"use strict";e.exports=require("node:http")},42725:e=>{"use strict";e.exports=require("node:http2")},87503:e=>{"use strict";e.exports=require("node:net")},38846:e=>{"use strict";e.exports=require("node:perf_hooks")},39630:e=>{"use strict";e.exports=require("node:querystring")},84492:e=>{"use strict";e.exports=require("node:stream")},31764:e=>{"use strict";e.exports=require("node:tls")},41041:e=>{"use strict";e.exports=require("node:url")},47261:e=>{"use strict";e.exports=require("node:util")},93746:e=>{"use strict";e.exports=require("node:util/types")},24086:e=>{"use strict";e.exports=require("node:worker_threads")},65628:e=>{"use strict";e.exports=require("node:zlib")},96060:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>h,originalPathname:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>c}),r(92349),r(58522),r(35866),r(26682);var s=r(23191),a=r(88716),i=r(37922),n=r.n(i),l=r(95231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);r.d(t,o);let c=["",{children:["(main)",{children:["users",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,92349)),"D:\\phone_store_management\\phone_store_management\\src\\app\\(main)\\users\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,58522)),"D:\\phone_store_management\\phone_store_management\\src\\app\\(main)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,26682)),"D:\\phone_store_management\\phone_store_management\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}],d=["D:\\phone_store_management\\phone_store_management\\src\\app\\(main)\\users\\page.tsx"],u="/(main)/users/page",h={require:r,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(main)/users/page",pathname:"/users",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},67393:(e,t,r)=>{Promise.resolve().then(r.bind(r,47551))},12714:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(76557).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},75290:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(76557).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},70003:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(76557).Z)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},88307:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(76557).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},58038:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(76557).Z)("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]])},98091:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(76557).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},47551:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>P});var s=r(10326),a=r(17577),i=r(29752),n=r(91664),l=r(41190),o=r(38443),c=r(24118),d=r(44794),u=r(29280),h=r(87542),m=r(79635),p=r(58038);let f=(0,r(76557).Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var x=r(83855),g=r(88307),y=r(75290),v=r(12714),j=r(70003),N=r(98091),w=r(99106),b=r(76),_=r(90097),k=r(90445),A=r(35957);class E extends _.bQ{constructor(){super("users")}async createUser(e,t){try{if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.email))return{success:!1,error:"Email kh\xf4ng đ\xfang định dạng",errorCode:"INVALID_EMAIL"};let r=await this.getUserByEmail(e.email);if(r.success&&r.data)return{success:!1,error:"Email đ\xe3 được sử dụng",errorCode:"EMAIL_EXISTS"};let s=await (0,A.Xb)(k.I8,e.email,e.password),a=s.user;await (0,A.ck)(a,{displayName:e.displayName});let i=w.Bv[e.role]?.permissions?[...w.Bv[e.role].permissions]:[],n={email:e.email,displayName:e.displayName,firstName:e.firstName,lastName:e.lastName,phone:e.phone,role:e.role,permissions:i,customPermissions:[],employeeId:s.user.uid,department:e.department??"",position:e.position??"",assignedStores:e.assignedStores||[],primaryStore:e.primaryStore??"",canAccessAllStores:"admin"===e.role,isActive:!0,isEmailVerified:a.emailVerified,isPhoneVerified:!1,mustChangePassword:e.mustChangePassword||!1,totalLogins:0,twoFactorEnabled:!1,preferences:{theme:"light",language:"vi",notifications:{email:!0,sms:!1,push:!0,lowStock:"store_manager"===e.role||"warehouse_staff"===e.role,newOrders:"sales_staff"===e.role||"store_manager"===e.role,returns:"sales_staff"===e.role||"store_manager"===e.role},dashboard:{defaultView:"overview",widgets:this.getDefaultWidgetsByRole(e.role)}},certifications:[],notes:e.notes??"",tags:e.tags??[],failedLoginAttempts:0,isDeleted:!1};return await this.createWithId(a.uid,n,t)}catch(e){if("auth/email-already-in-use"===e.code)return{success:!1,error:"Email đ\xe3 được sử dụng",errorCode:"EMAIL_EXISTS"};if("auth/weak-password"===e.code)return{success:!1,error:"Mật khẩu qu\xe1 yếu",errorCode:"WEAK_PASSWORD"};return this.handleError(e)}}async createWithId(e,t,r){try{let s=this.addAuditFields(t,r,!1),a=(0,b.JU)(k.db,this.collectionName,e);await (0,b.pl)(a,s);let i=await (0,b.QT)(a);if(!i.exists())return{success:!1,error:"Kh\xf4ng thể tạo mới dữ liệu",errorCode:"CREATE_FAILED"};return{success:!0,data:{id:i.id,...i.data()}}}catch(e){return this.handleError(e)}}async updateUser(e,t,r){try{let s={};return t.displayName&&(s.displayName=t.displayName),t.firstName&&(s.firstName=t.firstName),t.lastName&&(s.lastName=t.lastName),t.phone&&(s.phone=t.phone),t.profileImageUrl&&(s.profileImageUrl=t.profileImageUrl),t.role&&(s.role=t.role,s.permissions=w.Bv[t.role]?.permissions?[...w.Bv[t.role].permissions]:[]),t.customPermissions&&(s.customPermissions=t.customPermissions),t.employeeId&&(s.employeeId=t.employeeId),t.department&&(s.department=t.department),t.position&&(s.position=t.position),t.salary&&(s.salary=t.salary),t.assignedStores&&(s.assignedStores=t.assignedStores),t.primaryStore&&(s.primaryStore=t.primaryStore),void 0!==t.canAccessAllStores&&(s.canAccessAllStores=t.canAccessAllStores),void 0!==t.isActive&&(s.isActive=t.isActive),void 0!==t.mustChangePassword&&(s.mustChangePassword=t.mustChangePassword),t.performance&&s.performance&&(s.performance={...s.performance,...t.performance}),t.notes&&(s.notes=t.notes),t.tags&&(s.tags=t.tags),await this.update(e,s,r)}catch(e){return this.handleError(e)}}async deleteUser(e,t){try{let r=await this.update(e,{isDeleted:!0,isActive:!1},t);if(r.success)return{success:!0};return{success:!1,error:r.error,errorCode:r.errorCode}}catch(e){return this.handleError(e)}}async getUserByEmail(e){try{let t=await this.list({where:[{field:"email",operator:"==",value:e}],limit:1});if(!t.success)return{success:!1,error:t.error,errorCode:t.errorCode};return{success:!0,data:t.data.data.length>0?t.data.data[0]:null}}catch(e){return this.handleError(e)}}async getUserWithComputedFields(e){try{let t=await this.getById(e);if(!t.success||!t.data)return t;let r=t.data,s=w.Bv[r.role],a={...r,roleInfo:{name:s?.name||"Unknown Role",level:s?.level||0,permissions:s?.permissions?[...s.permissions]:[]},allPermissions:(0,w.fi)(r),isOnline:!1,canLogin:r.isActive&&!r.accountLockedUntil,passwordExpired:!1,accountLocked:!!(r.accountLockedUntil&&r.accountLockedUntil.toDate()>new Date)};return{success:!0,data:a}}catch(e){return this.handleError(e)}}async searchUsers(e){try{let t={limit:e.limit||20},r=[];e.role&&e.role.length>0&&r.push({field:"role",operator:"in",value:e.role}),e.department&&e.department.length>0&&r.push({field:"department",operator:"in",value:e.department}),void 0!==e.isActive&&r.push({field:"isActive",operator:"==",value:e.isActive}),e.assignedStores&&e.assignedStores.length>0&&r.push({field:"assignedStores",operator:"array-contains-any",value:e.assignedStores}),e.primaryStore&&r.push({field:"primaryStore",operator:"==",value:e.primaryStore}),void 0!==e.mustChangePassword&&r.push({field:"mustChangePassword",operator:"==",value:e.mustChangePassword}),void 0!==e.isEmailVerified&&r.push({field:"isEmailVerified",operator:"==",value:e.isEmailVerified}),void 0!==e.twoFactorEnabled&&r.push({field:"twoFactorEnabled",operator:"==",value:e.twoFactorEnabled}),e.hiredAfter&&r.push({field:"hireDate",operator:">=",value:b.EK.fromDate(e.hiredAfter)}),e.hiredBefore&&r.push({field:"hireDate",operator:"<=",value:b.EK.fromDate(e.hiredBefore)}),e.lastLoginAfter&&r.push({field:"lastLoginAt",operator:">=",value:b.EK.fromDate(e.lastLoginAfter)}),e.lastLoginBefore&&r.push({field:"lastLoginAt",operator:"<=",value:b.EK.fromDate(e.lastLoginBefore)}),t.where=r,e.sortBy?t.orderBy=[{field:e.sortBy,direction:e.sortOrder||"asc"}]:t.orderBy=[{field:"displayName",direction:"asc"}],e.startAfter&&(t.startAfter=e.startAfter);let s=await this.list(t);if(s.success&&e.searchTerm){let t=e.searchTerm.toLowerCase();s.data.data=s.data.data.filter(e=>e.displayName.toLowerCase().includes(t)||e.email.toLowerCase().includes(t)||e.employeeId&&e.employeeId.toLowerCase().includes(t))}return s}catch(e){return this.handleError(e)}}async getUsersByRole(e){try{let t=await this.list({where:[{field:"role",operator:"==",value:e},{field:"isActive",operator:"==",value:!0}],orderBy:[{field:"displayName",direction:"asc"}]});if(!t.success)return{success:!1,error:t.error,errorCode:t.errorCode};return{success:!0,data:t.data.data}}catch(e){return this.handleError(e)}}async updateUserLogin(e,t){try{let r={lastLoginAt:t.lastLoginAt,lastLoginIP:t.lastLoginIP,lastLoginDevice:t.lastLoginDevice,totalLogins:(0,b.nP)(1),failedLoginAttempts:0};return await this.update(e,r,e)}catch(e){return this.handleError(e)}}checkUserPermission(e,t,r){if(!(0,w.Fs)(e,t))return{hasPermission:!1,reason:"Insufficient permissions"};let s=(0,w.av)(e,t.split(".")[0],t.split(".")[1],r);return{hasPermission:s.hasPermission,reason:s.reason}}getDefaultWidgetsByRole(e){switch(e){case"admin":return["revenue_overview","sales_summary","inventory_alerts","user_activity","system_health"];case"store_manager":return["revenue_overview","sales_summary","inventory_alerts","staff_performance","customer_analytics"];case"sales_staff":return["daily_sales","my_performance","customer_list","product_catalog"];case"warehouse_staff":return["inventory_summary","stock_movements","low_stock_alerts","recent_shipments"];default:return["overview"]}}}let C=new E;var S=r(85999);let q="mock-admin-user-id";function P(){var e,t,r,b,_,k;let[A,E]=(0,a.useState)([]),[P,T]=(0,a.useState)(!0),[I,L]=(0,a.useState)(""),[R]=(t=(0,a.useRef)(I),r=(0,a.useState)({})[1],b=function(e,t,r){var s=this,i=(0,a.useRef)(null),n=(0,a.useRef)(0),l=(0,a.useRef)(null),o=(0,a.useRef)([]),c=(0,a.useRef)(),d=(0,a.useRef)(),u=(0,a.useRef)(e),h=(0,a.useRef)(!0);u.current=e;var m="undefined"!=typeof window,p=!t&&0!==t&&m;if("function"!=typeof e)throw TypeError("Expected a function");t=+t||0;var f=!!(r=r||{}).leading,x=!("trailing"in r)||!!r.trailing,g="maxWait"in r,y="debounceOnServer"in r&&!!r.debounceOnServer,v=g?Math.max(+r.maxWait||0,t):null;return(0,a.useEffect)(function(){return h.current=!0,function(){h.current=!1}},[]),(0,a.useMemo)(function(){var e=function(e){var t=o.current,r=c.current;return o.current=c.current=null,n.current=e,d.current=u.current.apply(r,t)},r=function(e,t){p&&cancelAnimationFrame(l.current),l.current=p?requestAnimationFrame(e):setTimeout(e,t)},a=function(e){if(!h.current)return!1;var r=e-i.current;return!i.current||r>=t||r<0||g&&e-n.current>=v},j=function(t){return l.current=null,x&&o.current?e(t):(o.current=c.current=null,d.current)},N=function e(){var s=Date.now();if(a(s))return j(s);if(h.current){var l=t-(s-i.current);r(e,g?Math.min(l,v-(s-n.current)):l)}},w=function(){if(m||y){var u=Date.now(),p=a(u);if(o.current=[].slice.call(arguments),c.current=s,i.current=u,p){if(!l.current&&h.current)return n.current=i.current,r(N,t),f?e(i.current):d.current;if(g)return r(N,t),e(i.current)}return l.current||r(N,t),d.current}};return w.cancel=function(){l.current&&(p?cancelAnimationFrame(l.current):clearTimeout(l.current)),n.current=0,o.current=i.current=c.current=l.current=null},w.isPending=function(){return!!l.current},w.flush=function(){return l.current?j(Date.now()):d.current},w},[f,g,t,v,x,p,m,y])}((0,a.useCallback)(function(e){t.current=e,r({})},[r]),300,e),k=(_=(0,a.useRef)(I)).current,k===I||(b(I),_.current=I),[t.current,b]),[D,Z]=(0,a.useState)(!1),[B,O]=(0,a.useState)(!1),[U,V]=(0,a.useState)(null),[F,z]=(0,a.useState)({role:"sales_staff",displayName:"",email:"",password:"",phone:"",firstName:"",lastName:""}),[M,K]=(0,a.useState)({}),[Q,X]=(0,a.useState)(""),$=async()=>{T(!0);let e=await C.searchUsers({searchTerm:R,sortBy:"displayName",sortOrder:"asc"});e.success&&e.data?E(e.data.data.filter(e=>!e.isDeleted)):S.Am.error("Lỗi",{description:e.error||"Kh\xf4ng thể tải danh s\xe1ch người d\xf9ng."}),T(!1)},W=async()=>{if(F.password!==Q){S.Am.error("Lỗi",{description:"Mật khẩu kh\xf4ng khớp."});return}if(!F.email||!F.password||!F.displayName){S.Am.error("Lỗi",{description:"Vui l\xf2ng điền c\xe1c trường bắt buộc."});return}let e=await C.createUser(F,q);e.success?(S.Am.success("Th\xe0nh c\xf4ng",{description:"Người d\xf9ng đ\xe3 được tạo th\xe0nh c\xf4ng."}),Z(!1),z({role:"sales_staff",displayName:"",email:"",password:"",phone:"",firstName:"",lastName:""}),X(""),$()):S.Am.error("Lỗi",{description:e.error||"Kh\xf4ng thể tạo người d\xf9ng."})},H=async()=>{if(!U)return;let e=await C.updateUser(U.id,M,q);e.success?(S.Am.success("Th\xe0nh c\xf4ng",{description:"Th\xf4ng tin người d\xf9ng đ\xe3 được cập nhật."}),O(!1),V(null),K({}),$()):S.Am.error("Lỗi",{description:e.error||"Kh\xf4ng thể cập nhật người d\xf9ng."})},J=async e=>{let t=await C.updateUser(e.id,{isActive:!e.isActive},q);t.success?(S.Am.success("Th\xe0nh c\xf4ng",{description:`Người d\xf9ng đ\xe3 được ${e.isActive?"v\xf4 hiệu h\xf3a":"k\xedch hoạt"}.`}),$()):S.Am.error("Lỗi",{description:t.error||"Kh\xf4ng thể thay đổi trạng th\xe1i người d\xf9ng."})},Y=e=>{S.Am.warning(`Bạn c\xf3 chắc muốn x\xf3a người d\xf9ng ${e.displayName}?`,{action:{label:"X\xf3a",onClick:async()=>{let t=await C.deleteUser(e.id,q);t.success?(S.Am.success("Th\xe0nh c\xf4ng",{description:"Người d\xf9ng đ\xe3 được x\xf3a."}),$()):S.Am.error("Lỗi",{description:t.error||"Kh\xf4ng thể x\xf3a người d\xf9ng."})}},duration:5e3})},G=e=>{let t=w.Bv[e],r=s.jsx(m.Z,{className:"w-3 h-3 mr-1"}),a="bg-green-100 text-green-800";return"admin"===e?(r=s.jsx(p.Z,{className:"w-3 h-3 mr-1"}),a="bg-red-100 text-red-800"):"store_manager"===e&&(r=s.jsx(f,{className:"w-3 h-3 mr-1"}),a="bg-blue-100 text-blue-800"),(0,s.jsxs)(o.C,{className:a,children:[r,t?.name||e]})},ee=e=>e?new Date(1e3*e.seconds).toLocaleString("vi-VN"):"Chưa đăng nhập",et=(0,a.useMemo)(()=>({total:A.length,active:A.filter(e=>e.isActive).length,admin:A.filter(e=>"admin"===e.role).length,store_manager:A.filter(e=>"store_manager"===e.role).length,sales_staff:A.filter(e=>"sales_staff"===e.role).length,warehouse_staff:A.filter(e=>"warehouse_staff"===e.role).length}),[A]);return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Quản l\xfd người d\xf9ng"}),s.jsx("p",{className:"text-gray-600",children:"Quản l\xfd t\xe0i khoản v\xe0 ph\xe2n quyền hệ thống"})]}),(0,s.jsxs)(c.Vq,{open:D,onOpenChange:Z,children:[s.jsx(c.hg,{asChild:!0,children:(0,s.jsxs)(n.z,{children:[s.jsx(x.Z,{className:"w-4 h-4 mr-2"}),"Th\xeam người d\xf9ng"]})}),(0,s.jsxs)(c.cZ,{className:"sm:max-w-[600px]",children:[(0,s.jsxs)(c.fK,{children:[s.jsx(c.$N,{children:"Th\xeam người d\xf9ng mới"}),s.jsx(c.Be,{children:"Tạo t\xe0i khoản mới cho nh\xe2n vi\xean"})]}),(0,s.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[s.jsx(d._,{htmlFor:"displayName",children:"Họ v\xe0 t\xean"}),s.jsx(l.I,{id:"displayName",value:F.displayName,onChange:e=>z({...F,displayName:e.target.value}),placeholder:"Nguyễn Văn A"})]}),(0,s.jsxs)("div",{children:[s.jsx(d._,{htmlFor:"email",children:"Email"}),s.jsx(l.I,{id:"email",type:"email",value:F.email,onChange:e=>z({...F,email:e.target.value}),placeholder:"user@email.com"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[s.jsx(d._,{htmlFor:"firstName",children:"T\xean"}),s.jsx(l.I,{id:"firstName",value:F.firstName,onChange:e=>z({...F,firstName:e.target.value}),placeholder:"An"})]}),(0,s.jsxs)("div",{children:[s.jsx(d._,{htmlFor:"lastName",children:"Họ"}),s.jsx(l.I,{id:"lastName",value:F.lastName,onChange:e=>z({...F,lastName:e.target.value}),placeholder:"Nguyễn Văn"})]})]}),(0,s.jsxs)("div",{children:[s.jsx(d._,{htmlFor:"phone",children:"Số điện thoại"}),s.jsx(l.I,{id:"phone",value:F.phone,onChange:e=>z({...F,phone:e.target.value}),placeholder:"09XXXXXXXX"})]}),(0,s.jsxs)("div",{children:[s.jsx(d._,{htmlFor:"role",children:"Vai tr\xf2"}),(0,s.jsxs)(u.Ph,{value:F.role,onValueChange:e=>z({...F,role:e}),children:[s.jsx(u.i4,{children:s.jsx(u.ki,{})}),s.jsx(u.Bw,{children:Object.entries(w.Bv).map(([e,t])=>s.jsx(u.Ql,{value:e,children:t.name},e))})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[s.jsx(d._,{htmlFor:"password",children:"Mật khẩu"}),s.jsx(l.I,{id:"password",type:"password",value:F.password,onChange:e=>z({...F,password:e.target.value}),placeholder:"••••••••"})]}),(0,s.jsxs)("div",{children:[s.jsx(d._,{htmlFor:"confirmPassword",children:"X\xe1c nhận mật khẩu"}),s.jsx(l.I,{id:"confirmPassword",type:"password",value:Q,onChange:e=>X(e.target.value),placeholder:"••••••••"})]})]})]}),(0,s.jsxs)(c.cN,{children:[s.jsx(n.z,{variant:"outline",onClick:()=>Z(!1),children:"Hủy"}),s.jsx(n.z,{onClick:W,children:"Tạo t\xe0i khoản"})]})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,s.jsxs)(i.Zb,{children:[(0,s.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(i.ll,{className:"text-sm font-medium",children:"Tổng người d\xf9ng"}),s.jsx(m.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsxs)(i.aY,{children:[s.jsx("div",{className:"text-2xl font-bold",children:et.total}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:[et.active," đang hoạt động"]})]})]}),(0,s.jsxs)(i.Zb,{children:[(0,s.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(i.ll,{className:"text-sm font-medium",children:"Quản trị vi\xean"}),s.jsx(p.Z,{className:"h-4 w-4 text-red-500"})]}),s.jsx(i.aY,{children:s.jsx("div",{className:"text-2xl font-bold text-red-600",children:et.admin})})]}),(0,s.jsxs)(i.Zb,{children:[(0,s.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(i.ll,{className:"text-sm font-medium",children:"Quản l\xfd"}),s.jsx(f,{className:"h-4 w-4 text-blue-500"})]}),s.jsx(i.aY,{children:s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:et.store_manager})})]}),(0,s.jsxs)(i.Zb,{children:[(0,s.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(i.ll,{className:"text-sm font-medium",children:"Nh\xe2n vi\xean"}),s.jsx(m.Z,{className:"h-4 w-4 text-green-500"})]}),s.jsx(i.aY,{children:s.jsx("div",{className:"text-2xl font-bold text-green-600",children:et.sales_staff+et.warehouse_staff})})]})]}),(0,s.jsxs)(i.Zb,{children:[s.jsx(i.Ol,{children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[s.jsx(i.ll,{children:"Danh s\xe1ch người d\xf9ng"}),(0,s.jsxs)("div",{className:"relative w-64",children:[s.jsx(g.Z,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),s.jsx(l.I,{placeholder:"T\xecm theo t\xean, email...",value:I,onChange:e=>L(e.target.value),className:"pl-10"})]})]})}),s.jsx(i.aY,{children:P?s.jsx("div",{className:"flex justify-center items-center h-40",children:s.jsx(y.Z,{className:"w-8 h-8 animate-spin text-primary"})}):s.jsx("div",{className:"space-y-4",children:A.map(e=>(0,s.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx(m.Z,{className:"w-6 h-6 text-blue-600"})}),(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"font-semibold text-lg",children:e.displayName}),s.jsx("p",{className:"text-sm text-gray-500",children:e.email}),(0,s.jsxs)("p",{className:"text-xs text-gray-400",children:["Đăng nhập cuối: ",ee(e.lastLoginAt)]})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[G(e.role),s.jsx(o.C,{variant:e.isActive?"default":"secondary",children:e.isActive?"Hoạt động":"Tạm kh\xf3a"})]})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center mt-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[s.jsx(h.r,{checked:e.isActive,onCheckedChange:()=>J(e),id:`status-switch-${e.id}`}),s.jsx(d._,{htmlFor:`status-switch-${e.id}`,className:"text-sm text-gray-600",children:e.isActive?"Hoạt động":"Tạm kh\xf3a"})]}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsxs)(n.z,{variant:"outline",size:"sm",children:[s.jsx(v.Z,{className:"w-4 h-4 mr-1"}),"Xem"]}),(0,s.jsxs)(n.z,{variant:"outline",size:"sm",onClick:()=>{V(e),K({displayName:e.displayName,firstName:e.firstName,lastName:e.lastName,phone:e.phone,role:e.role}),O(!0)},children:[s.jsx(j.Z,{className:"w-4 h-4 mr-1"}),"Sửa"]}),(0,s.jsxs)(n.z,{variant:"outline",size:"sm",className:"text-red-500 hover:text-red-700",onClick:()=>Y(e),children:[s.jsx(N.Z,{className:"w-4 h-4 mr-1"}),"X\xf3a"]})]})]})]},e.id))})})]}),s.jsx(c.Vq,{open:B,onOpenChange:O,children:(0,s.jsxs)(c.cZ,{className:"sm:max-w-[600px]",children:[(0,s.jsxs)(c.fK,{children:[s.jsx(c.$N,{children:"Chỉnh sửa người d\xf9ng"}),(0,s.jsxs)(c.Be,{children:["Cập nhật th\xf4ng tin cho ",U?.displayName]})]}),(0,s.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[s.jsx(d._,{children:"Họ v\xe0 t\xean"}),s.jsx(l.I,{value:M.displayName,onChange:e=>K({...M,displayName:e.target.value})})]}),(0,s.jsxs)("div",{children:[s.jsx(d._,{children:"Số điện thoại"}),s.jsx(l.I,{value:M.phone,onChange:e=>K({...M,phone:e.target.value})})]})]}),(0,s.jsxs)("div",{children:[s.jsx(d._,{children:"Vai tr\xf2"}),(0,s.jsxs)(u.Ph,{value:M.role,onValueChange:e=>K({...M,role:e}),children:[s.jsx(u.i4,{children:s.jsx(u.ki,{})}),s.jsx(u.Bw,{children:Object.entries(w.Bv).map(([e,t])=>s.jsx(u.Ql,{value:e,children:t.name},e))})]})]})]}),(0,s.jsxs)(c.cN,{children:[s.jsx(n.z,{variant:"outline",onClick:()=>O(!1),children:"Hủy"}),s.jsx(n.z,{onClick:H,children:"Lưu thay đổi"})]})]})})]})}},24118:(e,t,r)=>{"use strict";r.d(t,{$N:()=>f,Be:()=>x,Vq:()=>o,cN:()=>p,cZ:()=>h,fK:()=>m,hg:()=>c});var s=r(10326),a=r(17577),i=r(98958),n=r(94019),l=r(51223);let o=i.fC,c=i.xz,d=i.h_;i.x8;let u=a.forwardRef(({className:e,...t},r)=>s.jsx(i.aV,{ref:r,className:(0,l.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));u.displayName=i.aV.displayName;let h=a.forwardRef(({className:e,children:t,...r},a)=>(0,s.jsxs)(d,{children:[s.jsx(u,{}),(0,s.jsxs)(i.VY,{ref:a,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,(0,s.jsxs)(i.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[s.jsx(n.Z,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));h.displayName=i.VY.displayName;let m=({className:e,...t})=>s.jsx("div",{className:(0,l.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});m.displayName="DialogHeader";let p=({className:e,...t})=>s.jsx("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});p.displayName="DialogFooter";let f=a.forwardRef(({className:e,...t},r)=>s.jsx(i.Dx,{ref:r,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",e),...t}));f.displayName=i.Dx.displayName;let x=a.forwardRef(({className:e,...t},r)=>s.jsx(i.dk,{ref:r,className:(0,l.cn)("text-sm text-muted-foreground",e),...t}));x.displayName=i.dk.displayName},41190:(e,t,r)=>{"use strict";r.d(t,{I:()=>n});var s=r(10326),a=r(17577),i=r(51223);let n=a.forwardRef(({className:e,type:t,...r},a)=>s.jsx("input",{type:t,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:a,...r}));n.displayName="Input"},44794:(e,t,r)=>{"use strict";r.d(t,{_:()=>c});var s=r(10326),a=r(17577),i=r(34478),n=r(79360),l=r(51223);let o=(0,n.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=a.forwardRef(({className:e,...t},r)=>s.jsx(i.f,{ref:r,className:(0,l.cn)(o(),e),...t}));c.displayName=i.f.displayName},29280:(e,t,r)=>{"use strict";r.d(t,{Bw:()=>f,Ph:()=>d,Ql:()=>x,i4:()=>h,ki:()=>u});var s=r(10326),a=r(17577),i=r(38785),n=r(941),l=r(96633),o=r(32933),c=r(51223);let d=i.fC;i.ZA;let u=i.B4,h=a.forwardRef(({className:e,children:t,...r},a)=>(0,s.jsxs)(i.xz,{ref:a,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,s.jsx(i.JO,{asChild:!0,children:s.jsx(n.Z,{className:"h-4 w-4 opacity-50"})})]}));h.displayName=i.xz.displayName;let m=a.forwardRef(({className:e,...t},r)=>s.jsx(i.u_,{ref:r,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(l.Z,{className:"h-4 w-4"})}));m.displayName=i.u_.displayName;let p=a.forwardRef(({className:e,...t},r)=>s.jsx(i.$G,{ref:r,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(n.Z,{className:"h-4 w-4"})}));p.displayName=i.$G.displayName;let f=a.forwardRef(({className:e,children:t,position:r="popper",...a},n)=>s.jsx(i.h_,{children:(0,s.jsxs)(i.VY,{ref:n,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...a,children:[s.jsx(m,{}),s.jsx(i.l_,{className:(0,c.cn)("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),s.jsx(p,{})]})}));f.displayName=i.VY.displayName,a.forwardRef(({className:e,...t},r)=>s.jsx(i.__,{ref:r,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t})).displayName=i.__.displayName;let x=a.forwardRef(({className:e,children:t,...r},a)=>(0,s.jsxs)(i.ck,{ref:a,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(i.wU,{children:s.jsx(o.Z,{className:"h-4 w-4"})})}),s.jsx(i.eT,{children:t})]}));x.displayName=i.ck.displayName,a.forwardRef(({className:e,...t},r)=>s.jsx(i.Z0,{ref:r,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",e),...t})).displayName=i.Z0.displayName},87542:(e,t,r)=>{"use strict";r.d(t,{r:()=>b});var s=r(10326),a=r(17577),i=r(82561),n=r(48051),l=r(93095),o=r(52067),c=r(53405),d=r(2566),u=r(45226),h="Switch",[m,p]=(0,l.b)(h),[f,x]=m(h),g=a.forwardRef((e,t)=>{let{__scopeSwitch:r,name:l,checked:c,defaultChecked:d,required:h,disabled:m,value:p="on",onCheckedChange:x,form:g,...y}=e,[v,w]=a.useState(null),b=(0,n.e)(t,e=>w(e)),_=a.useRef(!1),k=!v||g||!!v.closest("form"),[A=!1,E]=(0,o.T)({prop:c,defaultProp:d,onChange:x});return(0,s.jsxs)(f,{scope:r,checked:A,disabled:m,children:[(0,s.jsx)(u.WV.button,{type:"button",role:"switch","aria-checked":A,"aria-required":h,"data-state":N(A),"data-disabled":m?"":void 0,disabled:m,value:p,...y,ref:b,onClick:(0,i.M)(e.onClick,e=>{E(e=>!e),k&&(_.current=e.isPropagationStopped(),_.current||e.stopPropagation())})}),k&&(0,s.jsx)(j,{control:v,bubbles:!_.current,name:l,value:p,checked:A,required:h,disabled:m,form:g,style:{transform:"translateX(-100%)"}})]})});g.displayName=h;var y="SwitchThumb",v=a.forwardRef((e,t)=>{let{__scopeSwitch:r,...a}=e,i=x(y,r);return(0,s.jsx)(u.WV.span,{"data-state":N(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:t})});v.displayName=y;var j=e=>{let{control:t,checked:r,bubbles:i=!0,...n}=e,l=a.useRef(null),o=(0,c.D)(r),u=(0,d.t)(t);return a.useEffect(()=>{let e=l.current,t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(o!==r&&t){let s=new Event("click",{bubbles:i});t.call(e,r),e.dispatchEvent(s)}},[o,r,i]),(0,s.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...n,tabIndex:-1,ref:l,style:{...e.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function N(e){return e?"checked":"unchecked"}var w=r(51223);let b=a.forwardRef(({className:e,...t},r)=>s.jsx(g,{className:(0,w.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:r,children:s.jsx(v,{className:(0,w.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));b.displayName=g.displayName},90097:(e,t,r)=>{"use strict";r.d(t,{Ds:()=>d,bQ:()=>i,eJ:()=>n,m1:()=>l,p6:()=>c,xG:()=>o});var s=r(76),a=r(90445);class i{constructor(e){this.collectionName=e,this.collectionRef=(0,s.hJ)(a.db,e)}handleError(e){if(console.error(`${this.collectionName} service error:`,e),e instanceof s.WA)switch(e.code){case"permission-denied":return{success:!1,error:"Bạn kh\xf4ng c\xf3 quyền thực hiện thao t\xe1c n\xe0y",errorCode:"PERMISSION_DENIED"};case"not-found":return{success:!1,error:"Kh\xf4ng t\xecm thấy dữ liệu y\xeau cầu",errorCode:"NOT_FOUND"};case"unavailable":return{success:!1,error:"Dịch vụ tạm thời kh\xf4ng khả dụng, vui l\xf2ng thử lại",errorCode:"UNAVAILABLE"};case"deadline-exceeded":return{success:!1,error:"Thao t\xe1c qu\xe1 thời gian chờ, vui l\xf2ng thử lại",errorCode:"TIMEOUT"};default:return{success:!1,error:`Lỗi hệ thống: ${e.message}`,errorCode:e.code.toUpperCase()}}return{success:!1,error:"Đ\xe3 xảy ra lỗi kh\xf4ng x\xe1c định",errorCode:"UNKNOWN_ERROR"}}buildQuery(e={}){let t=[];return e.where&&e.where.forEach(e=>{t.push((0,s.ar)(e.field,e.operator,e.value))}),e.orderBy&&e.orderBy.forEach(e=>{t.push((0,s.Xo)(e.field,e.direction))}),e.startAfter&&t.push((0,s.TQ)(e.startAfter)),e.limit&&t.push((0,s.b9)(e.limit)),(0,s.IO)(this.collectionRef,...t)}addAuditFields(e,t,r=!1){let a=s.EK.now(),i={updatedAt:a};return t&&(i.updatedBy=t),!r&&(i.createdAt=a,t&&(i.createdBy=t)),{...e,...i}}documentToObject(e){return{id:e.id,...e.data()}}async create(e,t){try{let r=this.addAuditFields(e,t,!1),a=await (0,s.ET)(this.collectionRef,r),i=await (0,s.QT)(a);if(!i.exists())return{success:!1,error:"Kh\xf4ng thể tạo mới dữ liệu",errorCode:"CREATE_FAILED"};return{success:!0,data:this.documentToObject(i)}}catch(e){return this.handleError(e)}}async getById(e){try{let t=(0,s.JU)(this.collectionRef,e),r=await (0,s.QT)(t);if(!r.exists())return{success:!1,error:"Kh\xf4ng t\xecm thấy dữ liệu",errorCode:"NOT_FOUND"};return{success:!0,data:this.documentToObject(r)}}catch(e){return this.handleError(e)}}async update(e,t,r){try{let a=(0,s.JU)(this.collectionRef,e),i=this.addAuditFields(t,r,!0);await (0,s.r7)(a,i);let n=await (0,s.QT)(a);if(!n.exists())return{success:!1,error:"Kh\xf4ng thể cập nhật dữ liệu",errorCode:"UPDATE_FAILED"};return{success:!0,data:this.documentToObject(n)}}catch(e){return this.handleError(e)}}async delete(e,t){try{let r=(0,s.JU)(this.collectionRef,e);try{return await (0,s.r7)(r,{isDeleted:!0,deletedAt:s.EK.now(),deletedBy:t,updatedAt:s.EK.now(),updatedBy:t}),{success:!0}}catch(e){return await (0,s.oe)(r),{success:!0}}}catch(e){return this.handleError(e)}}async list(e={}){try{let t=this.buildQuery(e),r=await (0,s.PL)(t),a=r.docs.map(e=>this.documentToObject(e)),i=r.docs[r.docs.length-1],n=r.docs.length===(e.limit||a.length);return{success:!0,data:{data:a,lastDoc:i,hasMore:n}}}catch(e){return this.handleError(e)}}async search(e,t,r={}){try{let a=t.map(async t=>{let a=(0,s.IO)(this.collectionRef,(0,s.ar)(t,">=",e),(0,s.ar)(t,"<=",e+""),...r.limit?[(0,s.b9)(r.limit)]:[]);return(await (0,s.PL)(a)).docs.map(e=>this.documentToObject(e))}),i=(await Promise.all(a)).flat().filter((e,t,r)=>t===r.findIndex(t=>t.id===e.id));return{success:!0,data:i}}catch(e){return this.handleError(e)}}async batchCreate(e,t){try{let r=(0,s.qs)(a.db),i=[];e.forEach(e=>{let a=(0,s.JU)(this.collectionRef),n=this.addAuditFields(e,t,!1);r.set(a,n),i.push(a)}),await r.commit();let n=await Promise.all(i.map(async e=>{let t=await (0,s.QT)(e);return this.documentToObject(t)}));return{success:!0,data:n}}catch(e){return this.handleError(e)}}async runTransaction(e){try{let t=await (0,s.i3)(a.db,e);return{success:!0,data:t}}catch(e){return this.handleError(e)}}async exists(e){try{let t=(0,s.JU)(this.collectionRef,e),r=await (0,s.QT)(t);return{success:!0,data:r.exists()}}catch(e){return this.handleError(e)}}async count(e={}){try{let t=this.buildQuery(e),r=await (0,s.PL)(t);return{success:!0,data:r.size}}catch(e){return this.handleError(e)}}}let n=e=>/^\d{15}$/.test(e),l=(e="SO")=>{let t=new Date,r=t.toISOString().slice(0,10).replace(/-/g,""),s=t.getTime().toString().slice(-4);return`${e}-${r}-${s}`},o=e=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(e),c=e=>{let t=e instanceof s.EK?e.toDate():e;return new Intl.DateTimeFormat("vi-VN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}).format(t)},d=(e,t)=>{let r;return(...s)=>{clearTimeout(r),r=setTimeout(()=>e(...s),t)}}},92349:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(68570).createProxy)(String.raw`D:\phone_store_management\phone_store_management\src\app\(main)\users\page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[560,367,738,54,999,530,479],()=>r(96060));module.exports=s})();