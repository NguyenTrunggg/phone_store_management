(()=>{var e={};e.id=264,e.ids=[264],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},84770:e=>{"use strict";e.exports=require("crypto")},80665:e=>{"use strict";e.exports=require("dns")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},35816:e=>{"use strict";e.exports=require("process")},76162:e=>{"use strict";e.exports=require("stream")},74026:e=>{"use strict";e.exports=require("string_decoder")},82452:e=>{"use strict";e.exports=require("tls")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},98061:e=>{"use strict";e.exports=require("node:assert")},92761:e=>{"use strict";e.exports=require("node:async_hooks")},72254:e=>{"use strict";e.exports=require("node:buffer")},40027:e=>{"use strict";e.exports=require("node:console")},6005:e=>{"use strict";e.exports=require("node:crypto")},65714:e=>{"use strict";e.exports=require("node:diagnostics_channel")},15673:e=>{"use strict";e.exports=require("node:events")},88849:e=>{"use strict";e.exports=require("node:http")},42725:e=>{"use strict";e.exports=require("node:http2")},87503:e=>{"use strict";e.exports=require("node:net")},38846:e=>{"use strict";e.exports=require("node:perf_hooks")},39630:e=>{"use strict";e.exports=require("node:querystring")},84492:e=>{"use strict";e.exports=require("node:stream")},31764:e=>{"use strict";e.exports=require("node:tls")},41041:e=>{"use strict";e.exports=require("node:url")},47261:e=>{"use strict";e.exports=require("node:util")},93746:e=>{"use strict";e.exports=require("node:util/types")},24086:e=>{"use strict";e.exports=require("node:worker_threads")},65628:e=>{"use strict";e.exports=require("node:zlib")},80403:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>h,pages:()=>c,routeModule:()=>u,tree:()=>d}),s(18953),s(58522),s(35866),s(26682);var r=s(23191),a=s(88716),i=s(37922),n=s.n(i),l=s(95231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let d=["",{children:["(main)",{children:["inventory",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,18953)),"D:\\phone_store_management\\phone_store_management\\src\\app\\(main)\\inventory\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,58522)),"D:\\phone_store_management\\phone_store_management\\src\\app\\(main)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,26682)),"D:\\phone_store_management\\phone_store_management\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}],c=["D:\\phone_store_management\\phone_store_management\\src\\app\\(main)\\inventory\\page.tsx"],h="/(main)/inventory/page",m={require:s,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(main)/inventory/page",pathname:"/inventory",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},62195:(e,t,s)=>{Promise.resolve().then(s.bind(s,92250))},87888:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(76557).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},37358:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(76557).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},71821:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(76557).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},92250:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>ei});var r=s(10326),a=s(17577),i=s(91664),n=s(99744),l=s(85999),o=s(83855),d=s(76),c=s(94001),h=s(29752),m=s(41190),u=s(44794),p=s(82015);function x({supplierName:e,orderDate:t,expectedDeliveryDate:s,notes:a,onSupplierNameChange:i,onOrderDateChange:n,onExpectedDeliveryDateChange:l,onNotesChange:o,isLoading:d}){return(0,r.jsxs)(h.Zb,{children:[r.jsx(h.Ol,{children:r.jsx(h.ll,{children:"Th\xf4ng tin nh\xe0 cung cấp"})}),(0,r.jsxs)(h.aY,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx(u._,{htmlFor:"supplier-name",children:"Nh\xe0 cung cấp"}),r.jsx(m.I,{id:"supplier-name",value:e,onChange:e=>i(e.target.value),disabled:d,placeholder:"Apple Việt Nam"})]}),(0,r.jsxs)("div",{children:[r.jsx(u._,{htmlFor:"order-date",children:"Ng\xe0y đặt h\xe0ng"}),r.jsx(m.I,{id:"order-date",type:"date",value:t,onChange:e=>n(e.target.value),disabled:d})]})]}),(0,r.jsxs)("div",{children:[r.jsx(u._,{htmlFor:"expected-delivery",children:"Ng\xe0y giao dự kiến (t\xf9y chọn)"}),r.jsx(m.I,{id:"expected-delivery",type:"date",value:s,onChange:e=>l(e.target.value),disabled:d})]}),(0,r.jsxs)("div",{children:[r.jsx(u._,{htmlFor:"notes",children:"Ghi ch\xfa"}),r.jsx(p.g,{id:"notes",value:a,onChange:e=>o(e.target.value),disabled:d,placeholder:"Nhập ghi ch\xfa về đơn h\xe0ng...",rows:3})]})]})]})}var g=s(29280);function y({products:e,selectedProductId:t,selectedVariantId:s,unitCost:a,onProductChange:i,onVariantChange:n,onUnitCostChange:l,isLoading:o=!1}){let d=e.find(e=>e.id===t);return(0,r.jsxs)(h.Zb,{children:[r.jsx(h.Ol,{children:r.jsx(h.ll,{children:"Chọn sản phẩm v\xe0 biến thể"})}),(0,r.jsxs)(h.aY,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(u._,{htmlFor:"product-select",children:"Model sản phẩm"}),(0,r.jsxs)(g.Ph,{value:t,onValueChange:e=>{i(e),n("")},disabled:o,children:[r.jsx(g.i4,{children:r.jsx(g.ki,{placeholder:"Chọn model..."})}),r.jsx(g.Bw,{children:e.map(e=>r.jsx(g.Ql,{value:e.id,children:e.name},e.id))})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(u._,{htmlFor:"variant-select",children:"Biến thể"}),(0,r.jsxs)(g.Ph,{value:s,onValueChange:n,disabled:!t||o,children:[r.jsx(g.i4,{children:r.jsx(g.ki,{placeholder:"Chọn biến thể..."})}),r.jsx(g.Bw,{children:d?.variants.map(e=>r.jsxs(g.Ql,{value:e.id,children:[e.storageCapacity," - ",e.colorName]},e.id))})]})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(u._,{htmlFor:"unit-cost",children:"Gi\xe1 nhập (VNĐ)"}),r.jsx(m.I,{id:"unit-cost",type:"number",placeholder:"31000000",value:a||"",onChange:e=>l(Number(e.target.value)),disabled:o})]})]})]})}var f=s(94019),v=s(87888),j=s(33261);let N=e=>15===e.length&&/^\d+$/.test(e),b=(e,t)=>{let s=e[t].trim();return!!s&&e.some((e,r)=>r!==t&&e.trim()===s)},I=(e,t,s,r)=>r[s]?r[s]:e.trim()?b(t,s)?"IMEI n\xe0y đ\xe3 được nhập ở tr\xean":N(e.trim())?null:"IMEI phải c\xf3 đ\xfang 15 chữ số":null;function w({imeiList:e,onImeiChange:t,onAddImei:s,onRemoveImei:a,errors:n={},isLoading:l=!1}){let d=e.filter(e=>{let t=e.trim();return t&&N(t)}).length;return(0,r.jsxs)(h.Zb,{children:[r.jsx(h.Ol,{children:(0,r.jsxs)(h.ll,{className:"flex items-center justify-between",children:["Danh s\xe1ch IMEI/Serial",(0,r.jsxs)(i.z,{variant:"outline",size:"sm",onClick:s,disabled:l,children:[r.jsx(o.Z,{className:"w-4 h-4 mr-1"}),"Th\xeam IMEI"]})]})}),(0,r.jsxs)(h.aY,{className:"space-y-4",children:[r.jsx("div",{className:"space-y-3",children:e.map((s,o)=>{let d=I(s,e,o,n),c=!!d;return(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)(u._,{htmlFor:`imei-${o}`,className:"sr-only",children:["IMEI ",o+1]}),r.jsx(m.I,{id:`imei-${o}`,placeholder:`Nhập IMEI ${o+1} (15 số)...`,value:s,onChange:e=>t(o,e.target.value),maxLength:15,className:c?"border-red-500":"",disabled:l})]}),e.length>1&&r.jsx(i.z,{variant:"ghost",size:"sm",onClick:()=>a(o),className:"text-red-500 hover:text-red-700",disabled:l,children:r.jsx(f.Z,{className:"w-4 h-4"})})]}),c&&r.jsx(j.bZ,{variant:"destructive",className:"py-2",children:r.jsx(j.X,{className:"text-xs",children:d})})]},o)})}),r.jsx("div",{className:"bg-blue-50 p-3 rounded-lg",children:(0,r.jsxs)("div",{className:"flex items-start space-x-2",children:[r.jsx(v.Z,{className:"w-4 h-4 text-blue-500 mt-0.5"}),(0,r.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,r.jsxs)("p",{className:"text-blue-800 font-medium",children:["IMEI hợp lệ: ",d,"/",e.length]}),(0,r.jsxs)("ul",{className:"text-blue-600 space-y-1",children:[r.jsx("li",{children:"• Mỗi IMEI phải c\xf3 đ\xfang 15 chữ số"}),r.jsx("li",{children:"• IMEI kh\xf4ng được tr\xf9ng lặp"}),r.jsx("li",{children:"• IMEI phải l\xe0 duy nhất trong hệ thống"}),r.jsx("li",{children:"• Tồn kho sẽ được cập nhật tự động"})]})]})]})})]})]})}var D=s(72427),k=s(48705),C=s(32933),E=s(76557);let S=(0,E.Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);function R({totalItems:e,unitCost:t,totalValue:s,selectedProductName:a,selectedVariantName:n,isValid:l,onConfirm:o,onSaveDraft:d,isLoading:c}){let m=e=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(e);return(0,r.jsxs)(h.Zb,{children:[r.jsx(h.Ol,{children:(0,r.jsxs)(h.ll,{className:"flex items-center gap-2",children:[r.jsx(k.Z,{className:"w-5 h-5"}),"T\xf3m tắt phiếu nhập"]})}),(0,r.jsxs)(h.aY,{className:"space-y-4",children:[a&&(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Sản phẩm"}),r.jsx("p",{className:"text-lg font-semibold",children:a}),n&&r.jsx("p",{className:"text-sm text-gray-600",children:n})]}),r.jsx(D.Z,{}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Số lượng IMEI:"}),r.jsx("span",{className:"font-medium",children:e})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Gi\xe1 nhập/m\xe1y:"}),r.jsx("span",{className:"font-medium",children:m(t)})]}),r.jsx(D.Z,{}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"font-medium",children:"Tổng gi\xe1 trị:"}),r.jsx("span",{className:"text-lg font-bold text-green-600",children:m(s)})]})]}),(0,r.jsxs)("div",{className:"space-y-2 pt-4",children:[r.jsx(i.z,{onClick:o,disabled:!l||c,className:"w-full",size:"lg",children:c?"Đang xử l\xfd...":(0,r.jsxs)(r.Fragment,{children:[r.jsx(C.Z,{className:"w-4 h-4 mr-2"}),"X\xe1c nhận nhập kho"]})}),(0,r.jsxs)(i.z,{onClick:d,disabled:c,variant:"outline",className:"w-full",children:[r.jsx(S,{className:"w-4 h-4 mr-2"}),"Lưu nh\xe1p"]})]}),!l&&(0,r.jsxs)("div",{className:"text-sm text-red-600 bg-red-50 p-3 rounded-lg",children:[r.jsx("p",{className:"font-medium",children:"Vui l\xf2ng kiểm tra:"}),(0,r.jsxs)("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[!a&&r.jsx("li",{children:"Chọn sản phẩm"}),!n&&r.jsx("li",{children:"Chọn biến thể"}),0===e&&r.jsx("li",{children:"Nhập \xedt nhất 1 IMEI hợp lệ"}),t<=0&&r.jsx("li",{children:"Nhập gi\xe1 nhập hợp lệ"})]})]})]})]})}var _=s(38443),P=s(37358),O=s(79635),q=s(12714),A=s(70003),T=s(98091),M=s(24118),V=s(51223);let L=a.forwardRef(({className:e,...t},s)=>r.jsx("div",{className:"relative w-full overflow-auto",children:r.jsx("table",{ref:s,className:(0,V.cn)("w-full caption-bottom text-sm",e),...t})}));L.displayName="Table";let Z=a.forwardRef(({className:e,...t},s)=>r.jsx("thead",{ref:s,className:(0,V.cn)("[&_tr]:border-b",e),...t}));Z.displayName="TableHeader";let $=a.forwardRef(({className:e,...t},s)=>r.jsx("tbody",{ref:s,className:(0,V.cn)("[&_tr:last-child]:border-0",e),...t}));$.displayName="TableBody",a.forwardRef(({className:e,...t},s)=>r.jsx("tfoot",{ref:s,className:(0,V.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t})).displayName="TableFooter";let U=a.forwardRef(({className:e,...t},s)=>r.jsx("tr",{ref:s,className:(0,V.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));U.displayName="TableRow";let K=a.forwardRef(({className:e,...t},s)=>r.jsx("th",{ref:s,className:(0,V.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));K.displayName="TableHead";let B=a.forwardRef(({className:e,...t},s)=>r.jsx("td",{ref:s,className:(0,V.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));B.displayName="TableCell",a.forwardRef(({className:e,...t},s)=>r.jsx("caption",{ref:s,className:(0,V.cn)("mt-4 text-sm text-muted-foreground",e),...t})).displayName="TableCaption";var z=s(57671);let F=(0,E.Z)("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]);var J=s(71821);let H=(0,E.Z)("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]),W=e=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(e),X=e=>new Date(e).toLocaleDateString("vi-VN"),Y=e=>{let t={completed:{label:"Ho\xe0n th\xe0nh",variant:"default"},pending:{label:"Đang xử l\xfd",variant:"secondary"},cancelled:{label:"Đ\xe3 hủy",variant:"destructive"}}[e]||{label:e,variant:"secondary"};return r.jsx(_.C,{variant:t.variant,children:t.label})};function Q({isOpen:e,onClose:t,intakeItem:s}){return e&&s?r.jsx(M.Vq,{open:e,onOpenChange:t,children:(0,r.jsxs)(M.cZ,{className:"sm:max-w-2xl",children:[(0,r.jsxs)(M.fK,{children:[(0,r.jsxs)(M.$N,{children:["Chi tiết phiếu nhập: ",s.orderNumber]}),r.jsx(M.Be,{children:"Xem th\xf4ng tin chi tiết của phiếu nhập kho."})]}),(0,r.jsxs)("div",{className:"grid gap-6 py-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"text-sm font-medium text-gray-500 flex items-center mb-1",children:[r.jsx(P.Z,{className:"w-4 h-4 mr-2 text-gray-400"}),"Ng\xe0y nhập"]}),r.jsx("p",{className:"font-medium",children:X(s.orderDate)})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"text-sm font-medium text-gray-500 flex items-center mb-1",children:[r.jsx(O.Z,{className:"w-4 h-4 mr-2 text-gray-400"}),"Người nhận"]}),r.jsx("p",{className:"font-medium",children:s.receivedByName})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"text-sm font-medium text-gray-500 flex items-center mb-1",children:[r.jsx(z.Z,{className:"w-4 h-4 mr-2 text-gray-400"}),"Nh\xe0 cung cấp"]}),r.jsx("p",{className:"font-medium",children:s.supplierName})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"text-sm font-medium text-gray-500 flex items-center mb-1",children:[r.jsx(F,{className:"w-4 h-4 mr-2 text-gray-400"}),"Trạng th\xe1i"]}),Y(s.status)]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"text-sm font-medium text-gray-500 flex items-center mb-1",children:[r.jsx(k.Z,{className:"w-4 h-4 mr-2 text-gray-400"}),"Tổng số IMEI"]}),r.jsx("p",{className:"font-medium",children:s.totalItemsReceived})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"text-sm font-medium text-gray-500 flex items-center mb-1",children:[r.jsx(J.Z,{className:"w-4 h-4 mr-2 text-gray-400"}),"Tổng tiền"]}),r.jsx("p",{className:"font-semibold text-lg text-green-600",children:W(s.totalAmount)})]})]}),(0,r.jsxs)("div",{className:"mt-2",children:[(0,r.jsxs)("h4",{className:"font-semibold text-md mb-2 flex items-center",children:[r.jsx(H,{className:"w-5 h-5 mr-2 text-gray-700"}),"Sản phẩm đ\xe3 nhập"]}),r.jsx("div",{className:"border rounded-md",children:(0,r.jsxs)(L,{children:[r.jsx(Z,{children:(0,r.jsxs)(U,{children:[r.jsx(K,{className:"font-semibold",children:"T\xean sản phẩm"}),r.jsx(K,{className:"text-right font-semibold",children:"Số lượng"}),r.jsx(K,{className:"text-right font-semibold",children:"Th\xe0nh tiền"})]})}),r.jsx($,{children:s.products.length>0?s.products.map((e,t)=>(0,r.jsxs)(U,{children:[r.jsx(B,{children:e.productName}),r.jsx(B,{className:"text-right",children:e.quantity}),r.jsx(B,{className:"text-right",children:W(e.totalCost)})]},t)):r.jsx(U,{children:r.jsx(B,{colSpan:3,className:"text-center text-gray-500 py-4",children:"Kh\xf4ng c\xf3 th\xf4ng tin sản phẩm. (Danh s\xe1ch sản phẩm trống)"})})})]})})]})]}),r.jsx(M.cN,{className:"mt-2",children:r.jsx(i.z,{variant:"outline",onClick:t,children:"Đ\xf3ng"})})]})}):null}function G({intakes:e,isLoading:t,onViewDetails:s,onEdit:n,onDelete:l}){let[o,d]=(0,a.useState)(!1),[c,m]=(0,a.useState)(null),u=e=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(e),p=e=>new Date(e).toLocaleDateString("vi-VN"),x=e=>{let t={completed:{label:"Ho\xe0n th\xe0nh",variant:"default"},pending:{label:"Đang xử l\xfd",variant:"secondary"},cancelled:{label:"Đ\xe3 hủy",variant:"destructive"}}[e]||{label:e,variant:"secondary"};return r.jsx(_.C,{variant:t.variant,children:t.label})},g=t=>{let s=e.find(e=>e.id===t);s&&(m(s),d(!0))};return t?(0,r.jsxs)(h.Zb,{children:[r.jsx(h.Ol,{children:r.jsx(h.ll,{children:"Lịch sử nhập kho"})}),r.jsx(h.aY,{children:r.jsx("div",{className:"flex items-center justify-center h-32",children:r.jsx("div",{className:"text-gray-500",children:"Đang tải..."})})})]}):0===e.length?(0,r.jsxs)(h.Zb,{children:[r.jsx(h.Ol,{children:r.jsx(h.ll,{children:"Lịch sử nhập kho"})}),r.jsx(h.aY,{children:r.jsx("div",{className:"flex items-center justify-center h-32",children:r.jsx("div",{className:"text-gray-500",children:"Chưa c\xf3 phiếu nhập kho n\xe0o"})})})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(h.Zb,{children:[r.jsx(h.Ol,{children:r.jsx(h.ll,{children:"Lịch sử nhập kho"})}),r.jsx(h.aY,{children:r.jsx("div",{className:"space-y-4",children:e.map(e=>(0,r.jsxs)("div",{className:"border rounded-lg p-4 hover:bg-gray-50 transition-colors",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"font-semibold text-lg",children:e.orderNumber}),(0,r.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-600 mt-1",children:[(0,r.jsxs)("span",{className:"flex items-center gap-1",children:[r.jsx(P.Z,{className:"w-4 h-4"}),p(e.orderDate)]}),(0,r.jsxs)("span",{className:"flex items-center gap-1",children:[r.jsx(O.Z,{className:"w-4 h-4"}),e.receivedByName]}),(0,r.jsxs)("span",{className:"flex items-center gap-1",children:[r.jsx(k.Z,{className:"w-4 h-4"}),e.totalItemsReceived," IMEI"]})]})]}),r.jsx("div",{className:"flex items-center gap-2",children:x(e.status)})]}),e.products&&e.products.length>0&&(0,r.jsxs)("div",{className:"mt-3 pt-3 border-t",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Sản phẩm đ\xe3 nhập:"}),r.jsx("ul",{className:"space-y-1 text-sm",children:e.products.map((e,t)=>(0,r.jsxs)("li",{className:"flex justify-between",children:[(0,r.jsxs)("span",{children:[e.productName," (SL: ",e.quantity,")"]}),r.jsx("span",{children:u(e.totalCost)})]},t))})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center mt-3",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Nh\xe0 cung cấp:"}),r.jsx("p",{className:"font-medium",children:e.supplierName}),r.jsx("p",{className:"text-lg font-bold text-green-600 mt-1",children:u(e.totalAmount)})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)(i.z,{variant:"outline",size:"sm",onClick:()=>g(e.id),children:[r.jsx(q.Z,{className:"w-4 h-4 mr-1"}),"Xem"]}),(0,r.jsxs)(i.z,{variant:"outline",size:"sm",onClick:()=>n(e.id),children:[r.jsx(A.Z,{className:"w-4 h-4 mr-1"}),"Sửa"]}),(0,r.jsxs)(i.z,{variant:"outline",size:"sm",onClick:()=>l(e.id),className:"text-red-600 hover:bg-red-50",children:[r.jsx(T.Z,{className:"w-4 h-4 mr-1"}),"X\xf3a"]})]})]})]},e.id))})})]}),r.jsx(Q,{isOpen:o,onClose:()=>d(!1),intakeItem:c})]})}var ee=s(90445),et=s(90097),es=s(80413);class er extends et.bQ{constructor(){super(es.Ul.INVENTORY)}async createPurchaseOrderWithIntake(e,t){try{return await this.runTransaction(async s=>{let r=[];for(let t of e.items)for(let e of t.imeis){if(!(0,et.eJ)(e))throw Error(`IMEI kh\xf4ng hợp lệ: ${e}. IMEI phải c\xf3 đ\xfang 15 chữ số.`);if(r.includes(e))throw Error(`IMEI tr\xf9ng lặp trong phiếu nhập: ${e}`);r.push(e)}for(let e of(await Promise.all(r.map(async e=>{let t=(0,d.IO)((0,d.hJ)(ee.db,"inventoryItems"),(0,d.ar)("imei","==",e),(0,d.b9)(1)),s=await (0,d.PL)(t);return{imei:e,exists:!s.empty,doc:s.docs[0]}}))))if(e.exists){let t=e.doc.data().status;if("in_stock"===t||"sold"===t)throw Error(`IMEI ${e.imei} đ\xe3 tồn tại trong kho hoặc đ\xe3 b\xe1n. Kh\xf4ng thể nhập lại.`);if("returned"===t)throw Error(`IMEI ${e.imei} đ\xe3 được trả lại. Bạn c\xf3 muốn nhập lại v\xe0o kho kh\xf4ng?`)}let a={};for(let t of e.items){let e=(0,d.JU)(ee.db,es.Ul.PRODUCTS,t.productId),r=await s.get(e);if(!r.exists())throw Error(`Sản phẩm kh\xf4ng tồn tại: ${t.productId}`);let i=(0,d.JU)(ee.db,es.Ul.PRODUCTS,t.productId,es.Ul.VARIANTS,t.variantId),n=await s.get(i);if(!n.exists())throw Error(`Biến thể sản phẩm kh\xf4ng tồn tại: ${t.variantId}`);if(a[t.variantId]={product:r.data(),variant:n.data()},t.unitCost<=0)throw Error("Gi\xe1 nhập phải l\xe0 số dương")}let i=(0,et.m1)("PO"),n=d.EK.now(),l=0,o=0;for(let t of e.items){let e=t.imeis.length*t.unitCost;l+=e,o+=t.imeis.length}let c={orderNumber:i,supplierName:e.supplier.name||"Nh\xe0 cung cấp",orderDate:n,expectedDeliveryDate:e.expectedDeliveryDate?d.EK.fromDate(e.expectedDeliveryDate):new d.EK(n.seconds+604800,n.nanoseconds),actualDeliveryDate:n,status:"completed",subtotal:l,taxAmount:0,shippingCost:0,totalAmount:l,currency:"VND",paidAmount:0,paymentStatus:"pending",receivedBy:t,receivedByName:"",qualityChecked:!0,qualityCheckedBy:t,hasDiscrepancies:!1,totalItemsOrdered:o,totalItemsReceived:o,totalVariants:e.items.length,notes:e.notes||"",createdAt:n,updatedAt:n,createdBy:t,updatedBy:t},h=(0,d.JU)((0,d.hJ)(ee.db,es.Ul.PURCHASE_ORDERS));s.set(h,c);let m=[];for(let r of e.items){let e=a[r.variantId],i=e.product,l=e.variant,o={productId:r.productId,variantId:r.variantId,productName:i?.name||"Kh\xf4ng r\xf5 t\xean sản phẩm",variantSku:l?.sku||"Kh\xf4ng r\xf5 SKU",colorName:l?.colorName||"Kh\xf4ng r\xf5 m\xe0u",storageCapacity:l?.storageCapacity||"Kh\xf4ng r\xf5 dung lượng",quantityOrdered:r.imeis.length,quantityReceived:r.imeis.length,quantityPending:0,quantityRejected:0,unitCost:r.unitCost,totalCost:r.imeis.length*r.unitCost,receivedImeis:r.imeis,receivedDate:n,receivedBy:t,condition:r.condition||"new",qualityNotes:r.notes||"",notes:r.notes||"",createdAt:n,updatedAt:n,createdBy:t,updatedBy:t},c=(0,d.JU)((0,d.hJ)(ee.db,es.Ul.PURCHASE_ORDERS,h.id,es.N9.ORDER_ITEMS));s.set(c,o),m.push({...o,id:c.id})}let u=[];for(let r of e.items){let l=a[r.variantId],o=l.product,c=l.variant;for(let a of r.imeis){let l={imei:a,productId:r.productId,variantId:r.variantId,productName:o?.name||"Kh\xf4ng r\xf5 t\xean sản phẩm",variantSku:c?.sku||"Kh\xf4ng r\xf5 SKU",colorName:c?.colorName||"Kh\xf4ng r\xf5 m\xe0u",storageCapacity:c?.storageCapacity||"Kh\xf4ng r\xf5 dung lượng",status:es.eM.IN_STOCK,entryDate:n,entryPrice:r.unitCost,supplierName:e.supplier.name||"Nh\xe0 cung cấp",purchaseOrderId:h.id,currentLocation:r.location||"Main Store",warehouseStaffId:t,condition:r.condition||"new",qualityNotes:r.notes||"",warrantyPeriodMonths:12,isDisplayUnit:!1,isRefurbished:!1,hasDefects:!1,needsRepair:!1,originalRetailPrice:c?.retailPrice||0,currentRetailPrice:c?.retailPrice||0,notes:r.notes||"",tags:[],lastStatusChange:n,lastLocationChange:n,lastPriceUpdate:n,createdAt:n,updatedAt:n,createdBy:t,updatedBy:t},m=(0,d.JU)((0,d.hJ)(ee.db,es.Ul.INVENTORY));s.set(m,l),u.push({...l,id:m.id});let p={inventoryItemId:m.id,imei:a,movementType:es.$D.IMPORT,timestamp:n,quantityChange:1,newStatus:es.eM.IN_STOCK,fromLocation:"",toLocation:r.location||"Main Store",userId:t,userRole:"inventory_staff",reason:"Nhập kho mới",notes:`Nhập kho từ phiếu nhập ${i}`,relatedOrderId:h.id,relatedDocumentType:"purchase",createdAt:n,updatedAt:n,createdBy:t,updatedBy:t},x=(0,d.JU)((0,d.hJ)(ee.db,es.Ul.STOCK_MOVEMENTS));s.set(x,p)}}return{purchaseOrder:{...c,id:h.id},inventoryItems:u}})}catch(e){return console.error("Inventory intake error:",e),{success:!1,error:e.message||"Kh\xf4ng thể thực hiện nhập kho",errorCode:"INTAKE_FAILED"}}}async validateImeiForIntake(e){try{if(!(0,et.eJ)(e))return{success:!0,data:{isValid:!1,exists:!1,canReimport:!1}};let t=(0,d.IO)((0,d.hJ)(ee.db,"inventoryItems"),(0,d.ar)("imei","==",e),(0,d.b9)(1)),s=await (0,d.PL)(t);if(s.empty)return{success:!0,data:{isValid:!0,exists:!1,canReimport:!1}};let r=s.docs[0].data(),a="returned"===r.status;return{success:!0,data:{isValid:!0,exists:!0,currentStatus:r.status,canReimport:a}}}catch(e){return this.handleError(e)}}async validateImeiList(e){try{let t=[],s=[],r=[];for(let r of e){if(!(0,et.eJ)(r)){s.push(r);continue}t.push(r)}for(let e of(await Promise.all(t.map(async e=>{let t=await this.validateImeiForIntake(e);return{imei:e,result:t.data}}))))e.result?.exists&&r.push({imei:e.imei,status:e.result.currentStatus||"",canReimport:e.result.canReimport||!1});return{success:!0,data:{valid:t,invalid:s,existing:r}}}catch(e){return this.handleError(e)}}async getAvailableStockByVariant(e){try{let t=(0,d.IO)((0,d.hJ)(ee.db,"inventoryItems"),(0,d.ar)("variantId","==",e),(0,d.ar)("status","in",["in_stock","returned_available"]),(0,d.Xo)("entryDate","asc")),s=(await (0,d.PL)(t)).docs.map(e=>({id:e.id,...e.data()}));return{success:!0,data:s}}catch(e){return this.handleError(e)}}async findByImei(e){try{let t=(0,d.IO)((0,d.hJ)(ee.db,"inventoryItems"),(0,d.ar)("imei","==",e),(0,d.b9)(1)),s=await (0,d.PL)(t);if(s.empty)return{success:!0,data:null};let r={id:s.docs[0].id,...s.docs[0].data()};return{success:!0,data:r}}catch(e){return this.handleError(e)}}async createStockMovement(e,t){try{let s=await this.getById(e.inventoryItemId);if(!s.success||!s.data)return{success:!1,error:"Kh\xf4ng t\xecm thấy sản phẩm trong kho",errorCode:"ITEM_NOT_FOUND"};let r=s.data,a=d.EK.now(),i={inventoryItemId:e.inventoryItemId,imei:r.imei,movementType:e.movementType,timestamp:a,quantityChange:this.getQuantityChange(e.movementType),previousStatus:r.status,newStatus:e.newStatus||r.status,fromLocation:r.currentLocation,toLocation:e.toLocation||r.currentLocation,userId:t,userRole:"inventory_staff",reason:e.reason||"",notes:e.notes||"",relatedOrderId:e.relatedOrderId,relatedDocumentType:e.relatedDocumentType};return await this.create(i,t)}catch(e){return this.handleError(e)}}async getItemMovementHistory(e){try{let t=(0,d.IO)((0,d.hJ)(ee.db,"stockMovements"),(0,d.ar)("inventoryItemId","==",e),(0,d.Xo)("timestamp","desc")),s=(await (0,d.PL)(t)).docs.map(e=>({id:e.id,...e.data()}));return{success:!0,data:s}}catch(e){return this.handleError(e)}}async searchInventory(e){try{let t=[];e.variantId&&t.push((0,d.ar)("variantId","==",e.variantId)),e.status&&e.status.length>0&&t.push((0,d.ar)("status","in",e.status)),e.imei&&t.push((0,d.ar)("imei","==",e.imei)),e.location&&e.location.length>0&&t.push((0,d.ar)("currentLocation","in",e.location));let s=e.sortBy||"entryDate",r=e.sortOrder||"desc";t.push((0,d.Xo)(s,r)),e.limit&&t.push((0,d.b9)(e.limit));let a=(0,d.IO)((0,d.hJ)(ee.db,"inventoryItems"),...t),i=(await (0,d.PL)(a)).docs.map(e=>({id:e.id,...e.data()}));return{success:!0,data:i}}catch(e){return this.handleError(e)}}async getRecentPurchaseOrders(e=20){try{let t=(0,d.IO)((0,d.hJ)(ee.db,"purchaseOrders"),(0,d.Xo)("orderDate","desc"),(0,d.b9)(e)),s=(await (0,d.PL)(t)).docs.map(e=>({id:e.id,...e.data()}));return{success:!0,data:s}}catch(e){return this.handleError(e)}}async getPurchaseOrderWithItems(e){try{let t=(0,d.JU)(ee.db,es.Ul.PURCHASE_ORDERS,e),s=await (0,d.QT)(t);if(!s.exists())return{success:!1,error:"Kh\xf4ng t\xecm thấy phiếu nhập kho với ID: "+e,errorCode:"ORDER_NOT_FOUND"};let r={id:s.id,...s.data()},a=(0,d.IO)((0,d.hJ)(ee.db,es.Ul.PURCHASE_ORDERS,e,es.N9.ORDER_ITEMS),(0,d.Xo)("createdAt","asc")),i=(await (0,d.PL)(a)).docs.map(e=>({id:e.id,...e.data()}));return{success:!0,data:{order:r,items:i}}}catch(e){return this.handleError(e)}}getQuantityChange(e){switch(e){case es.$D.IMPORT:case es.$D.RETURN:case es.$D.WARRANTY_IN:return 1;case es.$D.SALE:case es.$D.WARRANTY_OUT:case es.$D.DAMAGED:case es.$D.LOST:return -1;default:return 0}}}let ea=new er;function ei(){let{user:e}=(0,c.aC)(),[t,s]=(0,a.useState)(!1),[h,m]=(0,a.useState)(!0),[u,p]=(0,a.useState)(!0),[g,f]=(0,a.useState)([]),[v,j]=(0,a.useState)([]),[N,b]=(0,a.useState)("Apple Việt Nam"),[I,D]=(0,a.useState)(new Date().toISOString().split("T")[0]),[k,C]=(0,a.useState)(""),[E,S]=(0,a.useState)(""),[_,P]=(0,a.useState)(""),[O,q]=(0,a.useState)(""),[A,T]=(0,a.useState)(31e6),[M,V]=(0,a.useState)([""]),[L,Z]=(0,a.useState)({}),$=async()=>{try{p(!0);let e=await ea.getRecentPurchaseOrders(20);if(e.success&&e.data){let t=e.data.map(async e=>{let t=await ea.getPurchaseOrderWithItems(e.id),s=[],r=e;if(t.success&&t.data){let e=t.data.order,a=t.data.items;r=e,a&&Array.isArray(a)&&(s=a.map(e=>({productName:`${e.productName||"Sản phẩm kh\xf4ng t\xean"} ${e.storageCapacity||""} ${e.colorName||""} (${e.variantSku||"N/A"})`.trim(),quantity:e.quantityReceived||0,totalCost:e.totalCost||0})))}else console.warn(`Could not fetch details for order ${e.orderNumber}: ${t.error}`);return{id:r.id,orderNumber:r.orderNumber,orderDate:r.orderDate.toDate().toISOString(),supplierName:r.supplierName,receivedByName:r.receivedByName||"Nh\xe2n vi\xean kho",totalItemsReceived:r.totalItemsReceived,status:r.status,totalAmount:r.totalAmount,products:s}}),s=await Promise.all(t);j(s),console.log("Loaded intake history with detailed products:",s)}else l.Am.error(e.error||"Kh\xf4ng thể tải lịch sử nhập kho")}catch(e){console.error("Error loading intake history:",e),l.Am.error("Kh\xf4ng thể tải lịch sử nhập kho")}finally{p(!1)}};(0,a.useCallback)(async e=>{let t={},s=e.filter(e=>e.trim());if(0===s.length)return t;try{let r=await ea.validateImeiList(s);if(r.success&&r.data){let{invalid:a,existing:i}=r.data;s.forEach((s,r)=>{let i=e.indexOf(s);a.includes(s)&&(t[i]="IMEI kh\xf4ng hợp lệ (phải c\xf3 15 chữ số)")}),i.forEach(({imei:s,status:r,canReimport:a})=>{let i=e.indexOf(s);-1!==i&&(a?t[i]=`IMEI đ\xe3 được trả lại. C\xf3 thể nhập lại.`:t[i]=`IMEI đ\xe3 tồn tại với trạng th\xe1i: ${r}`)})}}catch(e){console.error("Error validating IMEIs:",e),l.Am.error("Lỗi khi kiểm tra IMEI")}return Z(t),t},[]);let U=M.filter((e,t)=>e.trim()&&15===e.length&&/^\d+$/.test(e)&&!L[t]),K=_&&O&&A>0&&U.length>0&&Object.keys(L).every(e=>!L[parseInt(e)]),B=U.length*A,z=g.find(e=>e.id===_),F=z?.variants.find(e=>e.id===O),J=z?.name,H=F?`${F.storageCapacity} - ${F.colorName}`:void 0,W=async()=>{if(console.log(K,e),console.log("Confirming intake with data:",{supplierName:N,orderDate:I,expectedDeliveryDate:k,notes:E,selectedProductId:_,selectedVariantId:O,unitCost:A,imeiList:U}),console.log("isFormValid",K),!K){l.Am.error("Vui l\xf2ng kiểm tra lại th\xf4ng tin nhập kho");return}if(!e){l.Am.error("Phi\xean đăng nhập đ\xe3 hết hạn");return}console.log("isFormValid",K),s(!0);try{let t={id:"",name:N,code:N.replace(/\s+/g,"_").toUpperCase(),primaryContact:{name:N,phone:"",email:"",isMainContact:!0},addresses:[],businessInfo:{taxId:"",businessType:"manufacturer"},status:"active",isPreferred:!1,isApproved:!0,requiresApproval:!1,createdAt:d.EK.now(),updatedAt:d.EK.now(),createdBy:e.uid,updatedBy:e.uid,financialInfo:{paymentTerms:"Net 30",creditLimit:void 0,currency:"VND",preferredPaymentMethod:"bank_transfer",bankAccountInfo:void 0},performance:{totalOrders:0,totalPurchaseValue:0,averageOrderValue:0,onTimeDeliveryRate:0,qualityRating:5,responsiveness:5,lastOrderDate:void 0,firstOrderDate:void 0},productCategories:[],shippingInfo:{defaultShippingMethod:"Standard",averageLeadTimeDays:7,minimumOrderQuantity:void 0,minimumOrderValue:void 0,shippingTerms:"other",canDropShip:!1},qualityInfo:{certifications:[],qualityPolicies:void 0,returnPolicy:void 0,warrantyTerms:void 0},relationship:{partnershipLevel:"preferred",contractStartDate:void 0,contractEndDate:void 0,exclusiveProducts:void 0,volumeDiscounts:void 0,negotiatedRates:void 0},communicationPreferences:{preferredContactMethod:"email",orderNotifications:!0,invoiceNotifications:!0,promotionNotifications:!1,language:"vi",timezone:"Asia/Ho_Chi_Minh"}},s={supplierName:"",items:[{productId:_,variantId:O,imeis:U,unitCost:A,condition:"new",location:"Main Store",notes:E}],notes:E,supplier:t,expectedDeliveryDate:k?new Date(k):void 0};console.log("Creating intake with data:",s);let r=await ea.createPurchaseOrderWithIntake(s,e.uid);r.success?(l.Am.success(`✅ Đ\xe3 tạo phiếu nhập với ${U.length} IMEI`,{description:`M\xe3 phiếu: ${r.data?.purchaseOrder.orderNumber}`}),P(""),q(""),V([""]),S(""),T(31e6),Z({}),await $()):l.Am.error("❌ "+(r.error||"Kh\xf4ng thể tạo phiếu nhập kho"))}catch(e){console.error("Error creating intake:",e),l.Am.error("❌ C\xf3 lỗi xảy ra: "+e.message)}finally{s(!1)}},X=async e=>{try{let t=await ea.getPurchaseOrderWithItems(e);t.success&&t.data&&(console.log("Order details:",t.data),l.Am.info(`📋 Chi tiết phiếu ${t.data.order.orderNumber}`))}catch(e){console.error("Error loading order details:",e),l.Am.error("Kh\xf4ng thể tải chi tiết phiếu nhập")}},Y=async e=>{confirm("Bạn c\xf3 chắc chắn muốn x\xf3a phiếu nhập n\xe0y?")&&(console.log("Delete intake:",e),l.Am.info("\uD83D\uDDD1️ T\xednh năng x\xf3a đang ph\xe1t triển"))};return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Nhập kho"}),r.jsx("p",{className:"text-gray-600",children:"Quản l\xfd nhập kho sản phẩm iPhone theo IMEI"})]}),(0,r.jsxs)(i.z,{onClick:()=>{localStorage.removeItem("inventory_draft"),P(""),q(""),V([""]),S(""),T(31e6),Z({}),l.Am.info("\uD83D\uDCDD Đ\xe3 tạo phiếu nhập mới")},children:[r.jsx(o.Z,{className:"w-4 h-4 mr-2"}),"Tạo phiếu nhập mới"]})]}),(0,r.jsxs)(n.mQ,{defaultValue:"new-intake",className:"w-full",children:[(0,r.jsxs)(n.dr,{children:[r.jsx(n.SP,{value:"new-intake",children:"Phiếu nhập mới"}),r.jsx(n.SP,{value:"history",children:"Lịch sử nhập kho"})]}),r.jsx(n.nU,{value:"new-intake",className:"space-y-6",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,r.jsxs)("div",{className:"lg:col-span-2 space-y-4",children:[r.jsx(x,{supplierName:N,orderDate:I,expectedDeliveryDate:k,notes:E,onSupplierNameChange:b,onOrderDateChange:D,onExpectedDeliveryDateChange:C,onNotesChange:S,isLoading:t}),r.jsx(y,{products:g,selectedProductId:_,selectedVariantId:O,unitCost:A,onProductChange:e=>{P(e),q("");let t=g.find(t=>t.id===e);t&&t.variants.length>0&&console.log("Product selected:",t)},onVariantChange:e=>{q(e);let t=g.find(e=>e.id===_),s=t?.variants.find(t=>t.id===e);if(s){let e=Math.round(.7*s.price);T(e),console.log("Variant selected:",s,"Default cost:",e)}},onUnitCostChange:T,isLoading:t||h}),r.jsx(w,{imeiList:M,onImeiChange:(e,t)=>{let s=[...M];s[e]=t,V(s)},onAddImei:()=>{V([...M,""])},onRemoveImei:e=>{if(M.length>1){V(M.filter((t,s)=>s!==e));let t={...L};delete t[e];let s={};Object.entries(t).forEach(([t,r])=>{let a=parseInt(t);a>e?s[a-1]=r:a<e&&(s[a]=r)}),Z(s)}},errors:L,isLoading:t})]}),r.jsx("div",{children:r.jsx(R,{totalItems:U.length,unitCost:A,totalValue:B,selectedProductName:J,selectedVariantName:H,isValid:!!K,onConfirm:W,onSaveDraft:()=>{let e={supplierName:N,orderDate:I,expectedDeliveryDate:k,notes:E,selectedProductId:_,selectedVariantId:O,unitCost:A,imeiList:M.filter(e=>e.trim())};localStorage.setItem("inventory_draft",JSON.stringify(e)),l.Am.success("\uD83D\uDCDD Đ\xe3 lưu nh\xe1p")},isLoading:t})})]})}),r.jsx(n.nU,{value:"history",children:r.jsx(G,{intakes:v,isLoading:u,onViewDetails:X,onEdit:e=>{console.log("Edit intake:",e),l.Am.info("\uD83D\uDD27 T\xednh năng chỉnh sửa đang ph\xe1t triển")},onDelete:Y})})]})]})}s(18695)},33261:(e,t,s)=>{"use strict";s.d(t,{X:()=>d,bZ:()=>o});var r=s(10326),a=s(17577),i=s(79360),n=s(51223);let l=(0,i.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),o=a.forwardRef(({className:e,variant:t,...s},a)=>r.jsx("div",{ref:a,role:"alert",className:(0,n.cn)(l({variant:t}),e),...s}));o.displayName="Alert",a.forwardRef(({className:e,...t},s)=>r.jsx("h5",{ref:s,className:(0,n.cn)("mb-1 font-medium leading-none tracking-tight",e),...t})).displayName="AlertTitle";let d=a.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:(0,n.cn)("text-sm [&_p]:leading-relaxed",e),...t}));d.displayName="AlertDescription"},72427:(e,t,s)=>{"use strict";s.d(t,{Z:()=>c});var r=s(10326),a=s(17577),i=s(45226),n="horizontal",l=["horizontal","vertical"],o=a.forwardRef((e,t)=>{let{decorative:s,orientation:a=n,...o}=e,d=l.includes(a)?a:n;return(0,r.jsx)(i.WV.div,{"data-orientation":d,...s?{role:"none"}:{"aria-orientation":"vertical"===d?d:void 0,role:"separator"},...o,ref:t})});o.displayName="Separator";var d=s(51223);let c=a.forwardRef(({className:e,orientation:t="horizontal",decorative:s=!0,...a},i)=>r.jsx(o,{ref:i,decorative:s,orientation:t,className:(0,d.cn)("shrink-0 bg-border","horizontal"===t?"h-[1px] w-full":"h-full w-[1px]",e),...a}));c.displayName=o.displayName},99744:(e,t,s)=>{"use strict";s.d(t,{mQ:()=>S,nU:()=>P,dr:()=>R,SP:()=>_});var r=s(10326),a=s(17577),i=s(82561),n=s(93095),l=s(15594),o=s(9815),d=s(45226),c=s(17124),h=s(52067),m=s(88957),u="Tabs",[p,x]=(0,n.b)(u,[l.Pc]),g=(0,l.Pc)(),[y,f]=p(u),v=a.forwardRef((e,t)=>{let{__scopeTabs:s,value:a,onValueChange:i,defaultValue:n,orientation:l="horizontal",dir:o,activationMode:u="automatic",...p}=e,x=(0,c.gm)(o),[g,f]=(0,h.T)({prop:a,onChange:i,defaultProp:n});return(0,r.jsx)(y,{scope:s,baseId:(0,m.M)(),value:g,onValueChange:f,orientation:l,dir:x,activationMode:u,children:(0,r.jsx)(d.WV.div,{dir:x,"data-orientation":l,...p,ref:t})})});v.displayName=u;var j="TabsList",N=a.forwardRef((e,t)=>{let{__scopeTabs:s,loop:a=!0,...i}=e,n=f(j,s),o=g(s);return(0,r.jsx)(l.fC,{asChild:!0,...o,orientation:n.orientation,dir:n.dir,loop:a,children:(0,r.jsx)(d.WV.div,{role:"tablist","aria-orientation":n.orientation,...i,ref:t})})});N.displayName=j;var b="TabsTrigger",I=a.forwardRef((e,t)=>{let{__scopeTabs:s,value:a,disabled:n=!1,...o}=e,c=f(b,s),h=g(s),m=k(c.baseId,a),u=C(c.baseId,a),p=a===c.value;return(0,r.jsx)(l.ck,{asChild:!0,...h,focusable:!n,active:p,children:(0,r.jsx)(d.WV.button,{type:"button",role:"tab","aria-selected":p,"aria-controls":u,"data-state":p?"active":"inactive","data-disabled":n?"":void 0,disabled:n,id:m,...o,ref:t,onMouseDown:(0,i.M)(e.onMouseDown,e=>{n||0!==e.button||!1!==e.ctrlKey?e.preventDefault():c.onValueChange(a)}),onKeyDown:(0,i.M)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&c.onValueChange(a)}),onFocus:(0,i.M)(e.onFocus,()=>{let e="manual"!==c.activationMode;p||n||!e||c.onValueChange(a)})})})});I.displayName=b;var w="TabsContent",D=a.forwardRef((e,t)=>{let{__scopeTabs:s,value:i,forceMount:n,children:l,...c}=e,h=f(w,s),m=k(h.baseId,i),u=C(h.baseId,i),p=i===h.value,x=a.useRef(p);return a.useEffect(()=>{let e=requestAnimationFrame(()=>x.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,r.jsx)(o.z,{present:n||p,children:({present:s})=>(0,r.jsx)(d.WV.div,{"data-state":p?"active":"inactive","data-orientation":h.orientation,role:"tabpanel","aria-labelledby":m,hidden:!s,id:u,tabIndex:0,...c,ref:t,style:{...e.style,animationDuration:x.current?"0s":void 0},children:s&&l})})});function k(e,t){return`${e}-trigger-${t}`}function C(e,t){return`${e}-content-${t}`}D.displayName=w;var E=s(51223);let S=v,R=a.forwardRef(({className:e,...t},s)=>r.jsx(N,{ref:s,className:(0,E.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));R.displayName=N.displayName;let _=a.forwardRef(({className:e,...t},s)=>r.jsx(I,{ref:s,className:(0,E.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));_.displayName=I.displayName;let P=a.forwardRef(({className:e,...t},s)=>r.jsx(D,{ref:s,className:(0,E.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));P.displayName=D.displayName},18953:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(68570).createProxy)(String.raw`D:\phone_store_management\phone_store_management\src\app\(main)\inventory\page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[560,367,738,54,999,530,479,478,686],()=>s(80403));module.exports=r})();