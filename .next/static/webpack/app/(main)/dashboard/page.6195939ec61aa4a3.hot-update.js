"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/(main)/dashboard/page",{

/***/ "(app-pages-browser)/./src/lib/firebase/services/dashboard.service.ts":
/*!********************************************************!*\
  !*** ./src/lib/firebase/services/dashboard.service.ts ***!
  \********************************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DashboardService: function() { return /* binding */ DashboardService; },\n/* harmony export */   dashboardService: function() { return /* binding */ dashboardService; }\n/* harmony export */ });\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! firebase/firestore */ \"(app-pages-browser)/./node_modules/firebase/firestore/dist/esm/index.esm.js\");\n/* harmony import */ var _lib_firebase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/firebase */ \"(app-pages-browser)/./src/lib/firebase.ts\");\n/* harmony import */ var _base_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./base.service */ \"(app-pages-browser)/./src/lib/firebase/services/base.service.ts\");\n/* harmony import */ var _pos_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pos.service */ \"(app-pages-browser)/./src/lib/firebase/services/pos.service.ts\");\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/constants */ \"(app-pages-browser)/./src/constants/index.ts\");\n\n\n\n\n\nclass DashboardService extends _base_service__WEBPACK_IMPORTED_MODULE_2__.BaseService {\n    async getStatsForDateRange(startDate, endDate) {\n        const ordersRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_lib_firebase__WEBPACK_IMPORTED_MODULE_1__.db, _constants__WEBPACK_IMPORTED_MODULE_4__.COLLECTIONS.SALES_ORDERS);\n        const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(ordersRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"orderDate\", \">=\", firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.Timestamp.fromDate(startDate)), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"orderDate\", \"<=\", firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.Timestamp.fromDate(endDate)));\n        const snapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q);\n        let revenue = 0;\n        const customerIds = new Set();\n        snapshot.docs.forEach((doc)=>{\n            var _order_customerInfo;\n            const order = doc.data();\n            revenue += order.totalAmount;\n            if (order.customerId) {\n                customerIds.add(order.customerId);\n            } else if ((_order_customerInfo = order.customerInfo) === null || _order_customerInfo === void 0 ? void 0 : _order_customerInfo.phone) {\n                // Fallback to phone if customerId is not present\n                customerIds.add(order.customerInfo.phone);\n            }\n        });\n        return {\n            revenue,\n            orders: snapshot.size,\n            customers: customerIds\n        };\n    }\n    calculatePercentageChange(current, previous) {\n        if (previous === 0) {\n            return current > 0 ? 100 : 0;\n        }\n        return (current - previous) / previous * 100;\n    }\n    async getDashboardStats() {\n        let lowStockThreshold = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : 5, monthlyTarget = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 2500000000;\n        try {\n            const now = new Date();\n            const startOfToday = new Date(now.getFullYear(), now.getMonth(), now.getDate(), 0, 0, 0);\n            const endOfToday = new Date(now.getFullYear(), now.getMonth(), now.getDate(), 23, 59, 59);\n            const yesterday = new Date(now);\n            yesterday.setDate(now.getDate() - 1);\n            const startOfYesterday = new Date(yesterday.getFullYear(), yesterday.getMonth(), yesterday.getDate(), 0, 0, 0);\n            const endOfYesterday = new Date(yesterday.getFullYear(), yesterday.getMonth(), yesterday.getDate(), 23, 59, 59);\n            const startOfMonth = new Date(now.getFullYear(), now.getMonth(), 1);\n            const endOfMonth = new Date(now.getFullYear(), now.getMonth() + 1, 0, 23, 59, 59);\n            // --- 1. Today's & Yesterday's Stats ---\n            const [todayStatsData, yesterdayStatsData] = await Promise.all([\n                this.getStatsForDateRange(startOfToday, endOfToday),\n                this.getStatsForDateRange(startOfYesterday, endOfYesterday)\n            ]);\n            const todayAvgOrderValue = todayStatsData.orders > 0 ? todayStatsData.revenue / todayStatsData.orders : 0;\n            const yesterdayAvgOrderValue = yesterdayStatsData.orders > 0 ? yesterdayStatsData.revenue / yesterdayStatsData.orders : 0;\n            const todayStats = {\n                revenue: todayStatsData.revenue,\n                orders: todayStatsData.orders,\n                avgOrderValue: todayAvgOrderValue,\n                customers: todayStatsData.customers.size,\n                revenueChange: this.calculatePercentageChange(todayStatsData.revenue, yesterdayStatsData.revenue),\n                ordersChange: this.calculatePercentageChange(todayStatsData.orders, yesterdayStatsData.orders),\n                avgOrderValueChange: this.calculatePercentageChange(todayAvgOrderValue, yesterdayAvgOrderValue),\n                customersChange: this.calculatePercentageChange(todayStatsData.customers.size, yesterdayStatsData.customers.size)\n            };\n            // --- 2. Inventory Alerts ---\n            const availableProductsResponse = await _pos_service__WEBPACK_IMPORTED_MODULE_3__.posService.getAvailableProductsForSale();\n            if (!availableProductsResponse.success || !availableProductsResponse.data) {\n                throw new Error(\"Could not fetch available products for inventory alerts.\");\n            }\n            const inventoryAlerts = [];\n            availableProductsResponse.data.forEach((product)=>{\n                product.variants.forEach((variant)=>{\n                    if (variant.totalStock <= lowStockThreshold) {\n                        inventoryAlerts.push({\n                            model: product.productName,\n                            variant: \"\".concat(variant.storageCapacity, \" \").concat(variant.colorName),\n                            stock: variant.totalStock,\n                            status: variant.totalStock === 0 ? \"out\" : \"low\"\n                        });\n                    }\n                });\n            });\n            // --- 3. Top Selling Products Today ---\n            // Using collectionGroup query on order items\n            const itemsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collectionGroup)(_lib_firebase__WEBPACK_IMPORTED_MODULE_1__.db, _constants__WEBPACK_IMPORTED_MODULE_4__.SUBCOLLECTIONS.ITEMS);\n            const itemsQuery = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(itemsRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"createdAt\", \">=\", firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.Timestamp.fromDate(startOfToday)), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"createdAt\", \"<=\", firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.Timestamp.fromDate(endOfToday)));\n            const itemsSnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(itemsQuery);\n            const productSales = new Map();\n            itemsSnapshot.docs.forEach((doc)=>{\n                const item = doc.data();\n                // Defensive check: Ensure the item and its key fields are valid\n                if (!item || !item.variantId || !item.productName) {\n                    console.warn(\"Skipping malformed order item from Firestore:\", doc.id);\n                    return; // Skip this document\n                }\n                const key = item.variantId;\n                const name = \"\".concat(item.productName, \" \").concat(item.storageCapacity || \"\");\n                if (!productSales.has(key)) {\n                    productSales.set(key, {\n                        name: name,\n                        sold: 0,\n                        revenue: 0\n                    });\n                }\n                const product = productSales.get(key);\n                // Use default value 0 if quantity or finalPrice are missing/falsy\n                product.sold += item.quantity || 0;\n                product.revenue += item.finalPrice || 0;\n            });\n            const topProducts = Array.from(productSales.values()).sort((a, b)=>b.revenue - a.revenue).slice(0, 5); // Get top 5\n            // --- 4. Monthly Revenue ---\n            const monthlyStats = await this.getStatsForDateRange(startOfMonth, endOfMonth);\n            const monthlyRevenue = {\n                current: monthlyStats.revenue,\n                target: monthlyTarget,\n                progress: monthlyTarget > 0 ? monthlyStats.revenue / monthlyTarget * 100 : 0\n            };\n            // --- Combine all data ---\n            const dashboardData = {\n                todayStats,\n                inventoryAlerts,\n                topProducts,\n                monthlyRevenue\n            };\n            return {\n                success: true,\n                data: dashboardData\n            };\n        } catch (error) {\n            return this.handleError(error);\n        }\n    }\n    constructor(){\n        super(\"dashboard\"); // Not a real collection, just for base class\n    }\n}\nconst dashboardService = new DashboardService();\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9saWIvZmlyZWJhc2Uvc2VydmljZXMvZGFzaGJvYXJkLnNlcnZpY2UudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQU80QjtBQUNRO0FBQzBCO0FBQ25CO0FBRWU7QUF3Q25ELE1BQU1XLHlCQUF5Qkosc0RBQVdBO0lBSy9DLE1BQWNLLHFCQUNaQyxTQUFlLEVBQ2ZDLE9BQWEsRUFDeUQ7UUFDdEUsTUFBTUMsWUFBWWYsOERBQVVBLENBQUNNLDZDQUFFQSxFQUFFRyxtREFBV0EsQ0FBQ08sWUFBWTtRQUN6RCxNQUFNQyxJQUFJZix5REFBS0EsQ0FDYmEsV0FDQVoseURBQUtBLENBQUMsYUFBYSxNQUFNRSx5REFBU0EsQ0FBQ2EsUUFBUSxDQUFDTCxhQUM1Q1YseURBQUtBLENBQUMsYUFBYSxNQUFNRSx5REFBU0EsQ0FBQ2EsUUFBUSxDQUFDSjtRQUU5QyxNQUFNSyxXQUFXLE1BQU1mLDJEQUFPQSxDQUFDYTtRQUUvQixJQUFJRyxVQUFVO1FBQ2QsTUFBTUMsY0FBYyxJQUFJQztRQUV4QkgsU0FBU0ksSUFBSSxDQUFDQyxPQUFPLENBQUMsQ0FBQ0M7Z0JBS1ZDO1lBSlgsTUFBTUEsUUFBUUQsSUFBSUUsSUFBSTtZQUN0QlAsV0FBV00sTUFBTUUsV0FBVztZQUM1QixJQUFJRixNQUFNRyxVQUFVLEVBQUU7Z0JBQ3BCUixZQUFZUyxHQUFHLENBQUNKLE1BQU1HLFVBQVU7WUFDbEMsT0FBTyxLQUFJSCxzQkFBQUEsTUFBTUssWUFBWSxjQUFsQkwsMENBQUFBLG9CQUFvQk0sS0FBSyxFQUFFO2dCQUNwQyxpREFBaUQ7Z0JBQ2pEWCxZQUFZUyxHQUFHLENBQUNKLE1BQU1LLFlBQVksQ0FBQ0MsS0FBSztZQUMxQztRQUNGO1FBRUEsT0FBTztZQUNMWjtZQUNBYSxRQUFRZCxTQUFTZSxJQUFJO1lBQ3JCQyxXQUFXZDtRQUNiO0lBQ0Y7SUFFUWUsMEJBQTBCQyxPQUFlLEVBQUVDLFFBQWdCLEVBQVU7UUFDM0UsSUFBSUEsYUFB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LEdBQUcsQ0FBQ0gsS0FBSzt3QkFBRUMsTUFBTUE7d0JBQU1HLE1BQU07d0JBQUc5RSxTQUFTO29CQUFFO2dCQUMxRDtnQkFFQSxNQUFNb0QsVUFBVWUsYUFBYVksR0FBRyxDQUFDTDtnQkFFakMsa0VBQWtFO2dCQUNsRXRCLFFBQVEwQixJQUFJLElBQUlULEtBQUtXLFFBQVEsSUFBSTtnQkFDakM1QixRQUFRcEQsT0FBTyxJQUFJcUUsS0FBS1ksVUFBVSxJQUFJO1lBQ3hDO1lBRUEsTUFBTUMsY0FBNEJDLE1BQU1DLElBQUksQ0FBQ2pCLGFBQWFrQixNQUFNLElBQzdEQyxJQUFJLENBQUMsQ0FBQ0MsR0FBR0MsSUFBTUEsRUFBRXhGLE9BQU8sR0FBR3VGLEVBQUV2RixPQUFPLEVBQ3BDeUYsS0FBSyxDQUFDLEdBQUcsSUFBSSxZQUFZO1lBRTVCLDZCQUE2QjtZQUM3QixNQUFNQyxlQUFlLE1BQU0sSUFBSSxDQUFDbEcsb0JBQW9CLENBQ2xEeUMsY0FDQUM7WUFFRixNQUFNeUQsaUJBQWlDO2dCQUNyQzFFLFNBQVN5RSxhQUFhMUYsT0FBTztnQkFDN0I0RixRQUFRdkU7Z0JBQ1J3RSxVQUNFeEUsZ0JBQWdCLElBQUksYUFBY3JCLE9BQU8sR0FBR3FCLGdCQUFpQixNQUFNO1lBQ3ZFO1lBRUEsMkJBQTJCO1lBQzNCLE1BQU15RSxnQkFBK0I7Z0JBQ25DckQ7Z0JBQ0FVO2dCQUNBK0I7Z0JBQ0FTO1lBQ0Y7WUFFQSxPQUFPO2dCQUFFMUMsU0FBUztnQkFBTTFDLE1BQU11RjtZQUFjO1FBQzlDLEVBQUUsT0FBT0MsT0FBTztZQUNkLE9BQU8sSUFBSSxDQUFDQyxXQUFXLENBQUNEO1FBQzFCO0lBQ0Y7SUE3TkFFLGFBQWM7UUFDWixLQUFLLENBQUMsY0FBYyw2Q0FBNkM7SUFDbkU7QUE0TkY7QUFFTyxNQUFNQyxtQkFBbUIsSUFBSTNHLG1CQUFtQiIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9zcmMvbGliL2ZpcmViYXNlL3NlcnZpY2VzL2Rhc2hib2FyZC5zZXJ2aWNlLnRzPzRkMjEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgY29sbGVjdGlvbixcbiAgY29sbGVjdGlvbkdyb3VwLFxuICBxdWVyeSxcbiAgd2hlcmUsXG4gIGdldERvY3MsXG4gIFRpbWVzdGFtcCxcbn0gZnJvbSBcImZpcmViYXNlL2ZpcmVzdG9yZVwiO1xuaW1wb3J0IHsgZGIgfSBmcm9tIFwiQC9saWIvZmlyZWJhc2VcIjtcbmltcG9ydCB7IEJhc2VTZXJ2aWNlLCBTZXJ2aWNlUmVzcG9uc2UgfSBmcm9tIFwiLi9iYXNlLnNlcnZpY2VcIjtcbmltcG9ydCB7IHBvc1NlcnZpY2UgfSBmcm9tIFwiLi9wb3Muc2VydmljZVwiO1xuaW1wb3J0IHsgRmlyZWJhc2VTYWxlc09yZGVyLCBGaXJlYmFzZVNhbGVzT3JkZXJJdGVtIH0gZnJvbSBcIi4uL21vZGVscy9wb3MubW9kZWxcIjtcbmltcG9ydCB7IENPTExFQ1RJT05TLCBTVUJDT0xMRUNUSU9OUyB9IGZyb20gXCJAL2NvbnN0YW50c1wiO1xuXG4vLyBEYXRhIHN0cnVjdHVyZXMgZm9yIHRoZSBkYXNoYm9hcmRcbmV4cG9ydCBpbnRlcmZhY2UgVG9kYXlTdGF0cyB7XG4gIHJldmVudWU6IG51bWJlcjtcbiAgb3JkZXJzOiBudW1iZXI7XG4gIGF2Z09yZGVyVmFsdWU6IG51bWJlcjtcbiAgY3VzdG9tZXJzOiBudW1iZXI7XG4gIHJldmVudWVDaGFuZ2U6IG51bWJlcjsgLy8gUGVyY2VudGFnZSBjaGFuZ2UgZnJvbSB5ZXN0ZXJkYXlcbiAgb3JkZXJzQ2hhbmdlOiBudW1iZXI7IC8vIFBlcmNlbnRhZ2UgY2hhbmdlXG4gIGF2Z09yZGVyVmFsdWVDaGFuZ2U6IG51bWJlcjsgLy8gUGVyY2VudGFnZSBjaGFuZ2VcbiAgY3VzdG9tZXJzQ2hhbmdlOiBudW1iZXI7IC8vIFBlcmNlbnRhZ2UgY2hhbmdlXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSW52ZW50b3J5QWxlcnQge1xuICBtb2RlbDogc3RyaW5nO1xuICB2YXJpYW50OiBzdHJpbmc7XG4gIHN0b2NrOiBudW1iZXI7XG4gIHN0YXR1czogXCJsb3dcIiB8IFwib3V0XCI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVG9wUHJvZHVjdCB7XG4gIG5hbWU6IHN0cmluZztcbiAgc29sZDogbnVtYmVyO1xuICByZXZlbnVlOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTW9udGhseVJldmVudWUge1xuICBjdXJyZW50OiBudW1iZXI7XG4gIHRhcmdldDogbnVtYmVyO1xuICBwcm9ncmVzczogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIERhc2hib2FyZERhdGEge1xuICB0b2RheVN0YXRzOiBUb2RheVN0YXRzO1xuICBpbnZlbnRvcnlBbGVydHM6IEludmVudG9yeUFsZXJ0W107XG4gIHRvcFByb2R1Y3RzOiBUb3BQcm9kdWN0W107XG4gIG1vbnRobHlSZXZlbnVlOiBNb250aGx5UmV2ZW51ZTtcbn1cblxuZXhwb3J0IGNsYXNzIERhc2hib2FyZFNlcnZpY2UgZXh0ZW5kcyBCYXNlU2VydmljZSB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKFwiZGFzaGJvYXJkXCIpOyAvLyBOb3QgYSByZWFsIGNvbGxlY3Rpb24sIGp1c3QgZm9yIGJhc2UgY2xhc3NcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZ2V0U3RhdHNGb3JEYXRlUmFuZ2UoXG4gICAgc3RhcnREYXRlOiBEYXRlLFxuICAgIGVuZERhdGU6IERhdGVcbiAgKTogUHJvbWlzZTx7IHJldmVudWU6IG51bWJlcjsgb3JkZXJzOiBudW1iZXI7IGN1c3RvbWVyczogU2V0PHN0cmluZz4gfT4ge1xuICAgIGNvbnN0IG9yZGVyc1JlZiA9IGNvbGxlY3Rpb24oZGIsIENPTExFQ1RJT05TLlNBTEVTX09SREVSUyk7XG4gICAgY29uc3QgcSA9IHF1ZXJ5KFxuICAgICAgb3JkZXJzUmVmLFxuICAgICAgd2hlcmUoXCJvcmRlckRhdGVcIiwgXCI+PVwiLCBUaW1lc3RhbXAuZnJvbURhdGUoc3RhcnREYXRlKSksXG4gICAgICB3aGVyZShcIm9yZGVyRGF0ZVwiLCBcIjw9XCIsIFRpbWVzdGFtcC5mcm9tRGF0ZShlbmREYXRlKSlcbiAgICApO1xuICAgIGNvbnN0IHNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhxKTtcblxuICAgIGxldCByZXZlbnVlID0gMDtcbiAgICBjb25zdCBjdXN0b21lcklkcyA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuXG4gICAgc25hcHNob3QuZG9jcy5mb3JFYWNoKChkb2MpID0+IHtcbiAgICAgIGNvbnN0IG9yZGVyID0gZG9jLmRhdGEoKSBhcyBGaXJlYmFzZVNhbGVzT3JkZXI7XG4gICAgICByZXZlbnVlICs9IG9yZGVyLnRvdGFsQW1vdW50O1xuICAgICAgaWYgKG9yZGVyLmN1c3RvbWVySWQpIHtcbiAgICAgICAgY3VzdG9tZXJJZHMuYWRkKG9yZGVyLmN1c3RvbWVySWQpO1xuICAgICAgfSBlbHNlIGlmIChvcmRlci5jdXN0b21lckluZm8/LnBob25lKSB7XG4gICAgICAgIC8vIEZhbGxiYWNrIHRvIHBob25lIGlmIGN1c3RvbWVySWQgaXMgbm90IHByZXNlbnRcbiAgICAgICAgY3VzdG9tZXJJZHMuYWRkKG9yZGVyLmN1c3RvbWVySW5mby5waG9uZSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgcmV2ZW51ZSxcbiAgICAgIG9yZGVyczogc25hcHNob3Quc2l6ZSxcbiAgICAgIGN1c3RvbWVyczogY3VzdG9tZXJJZHMsXG4gICAgfTtcbiAgfVxuXG4gIHByaXZhdGUgY2FsY3VsYXRlUGVyY2VudGFnZUNoYW5nZShjdXJyZW50OiBudW1iZXIsIHByZXZpb3VzOiBudW1iZXIpOiBudW1iZXIge1xuICAgIGlmIChwcmV2aW91cyA9PT0gMCkge1xuICAgICAgcmV0dXJuIGN1cnJlbnQgPiAwID8gMTAwIDogMDtcbiAgICB9XG4gICAgcmV0dXJuICgoY3VycmVudCAtIHByZXZpb3VzKSAvIHByZXZpb3VzKSAqIDEwMDtcbiAgfVxuXG4gIGFzeW5jIGdldERhc2hib2FyZFN0YXRzKFxuICAgIGxvd1N0b2NrVGhyZXNob2xkOiBudW1iZXIgPSA1LFxuICAgIG1vbnRobHlUYXJnZXQ6IG51bWJlciA9IDI1MDAwMDAwMDBcbiAgKTogUHJvbWlzZTxTZXJ2aWNlUmVzcG9uc2U8RGFzaGJvYXJkRGF0YT4+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgICAgIGNvbnN0IHN0YXJ0T2ZUb2RheSA9IG5ldyBEYXRlKFxuICAgICAgICBub3cuZ2V0RnVsbFllYXIoKSxcbiAgICAgICAgbm93LmdldE1vbnRoKCksXG4gICAgICAgIG5vdy5nZXREYXRlKCksXG4gICAgICAgIDAsXG4gICAgICAgIDAsXG4gICAgICAgIDBcbiAgICAgICk7XG4gICAgICBjb25zdCBlbmRPZlRvZGF5ID0gbmV3IERhdGUoXG4gICAgICAgIG5vdy5nZXRGdWxsWWVhcigpLFxuICAgICAgICBub3cuZ2V0TW9udGgoKSxcbiAgICAgICAgbm93LmdldERhdGUoKSxcbiAgICAgICAgMjMsXG4gICAgICAgIDU5LFxuICAgICAgICA1OVxuICAgICAgKTtcblxuICAgICAgY29uc3QgeWVzdGVyZGF5ID0gbmV3IERhdGUobm93KTtcbiAgICAgIHllc3RlcmRheS5zZXREYXRlKG5vdy5nZXREYXRlKCkgLSAxKTtcbiAgICAgIGNvbnN0IHN0YXJ0T2ZZZXN0ZXJkYXkgPSBuZXcgRGF0ZShcbiAgICAgICAgeWVzdGVyZGF5LmdldEZ1bGxZZWFyKCksXG4gICAgICAgIHllc3RlcmRheS5nZXRNb250aCgpLFxuICAgICAgICB5ZXN0ZXJkYXkuZ2V0RGF0ZSgpLFxuICAgICAgICAwLFxuICAgICAgICAwLFxuICAgICAgICAwXG4gICAgICApO1xuICAgICAgY29uc3QgZW5kT2ZZZXN0ZXJkYXkgPSBuZXcgRGF0ZShcbiAgICAgICAgeWVzdGVyZGF5LmdldEZ1bGxZZWFyKCksXG4gICAgICAgIHllc3RlcmRheS5nZXRNb250aCgpLFxuICAgICAgICB5ZXN0ZXJkYXkuZ2V0RGF0ZSgpLFxuICAgICAgICAyMyxcbiAgICAgICAgNTksXG4gICAgICAgIDU5XG4gICAgICApO1xuXG4gICAgICBjb25zdCBzdGFydE9mTW9udGggPSBuZXcgRGF0ZShub3cuZ2V0RnVsbFllYXIoKSwgbm93LmdldE1vbnRoKCksIDEpO1xuICAgICAgY29uc3QgZW5kT2ZNb250aCA9IG5ldyBEYXRlKFxuICAgICAgICBub3cuZ2V0RnVsbFllYXIoKSxcbiAgICAgICAgbm93LmdldE1vbnRoKCkgKyAxLFxuICAgICAgICAwLFxuICAgICAgICAyMyxcbiAgICAgICAgNTksXG4gICAgICAgIDU5XG4gICAgICApO1xuXG4gICAgICAvLyAtLS0gMS4gVG9kYXkncyAmIFllc3RlcmRheSdzIFN0YXRzIC0tLVxuICAgICAgY29uc3QgW3RvZGF5U3RhdHNEYXRhLCB5ZXN0ZXJkYXlTdGF0c0RhdGFdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgICB0aGlzLmdldFN0YXRzRm9yRGF0ZVJhbmdlKHN0YXJ0T2ZUb2RheSwgZW5kT2ZUb2RheSksXG4gICAgICAgIHRoaXMuZ2V0U3RhdHNGb3JEYXRlUmFuZ2Uoc3RhcnRPZlllc3RlcmRheSwgZW5kT2ZZZXN0ZXJkYXkpLFxuICAgICAgXSk7XG5cbiAgICAgIGNvbnN0IHRvZGF5QXZnT3JkZXJWYWx1ZSA9XG4gICAgICAgIHRvZGF5U3RhdHNEYXRhLm9yZGVycyA+IDBcbiAgICAgICAgICA/IHRvZGF5U3RhdHNEYXRhLnJldmVudWUgLyB0b2RheVN0YXRzRGF0YS5vcmRlcnNcbiAgICAgICAgICA6IDA7XG4gICAgICBjb25zdCB5ZXN0ZXJkYXlBdmdPcmRlclZhbHVlID1cbiAgICAgICAgeWVzdGVyZGF5U3RhdHNEYXRhLm9yZGVycyA+IDBcbiAgICAgICAgICA/IHllc3RlcmRheVN0YXRzRGF0YS5yZXZlbnVlIC8geWVzdGVyZGF5U3RhdHNEYXRhLm9yZGVyc1xuICAgICAgICAgIDogMDtcblxuICAgICAgY29uc3QgdG9kYXlTdGF0czogVG9kYXlTdGF0cyA9IHtcbiAgICAgICAgcmV2ZW51ZTogdG9kYXlTdGF0c0RhdGEucmV2ZW51ZSxcbiAgICAgICAgb3JkZXJzOiB0b2RheVN0YXRzRGF0YS5vcmRlcnMsXG4gICAgICAgIGF2Z09yZGVyVmFsdWU6IHRvZGF5QXZnT3JkZXJWYWx1ZSxcbiAgICAgICAgY3VzdG9tZXJzOiB0b2RheVN0YXRzRGF0YS5jdXN0b21lcnMuc2l6ZSxcbiAgICAgICAgcmV2ZW51ZUNoYW5nZTogdGhpcy5jYWxjdWxhdGVQZXJjZW50YWdlQ2hhbmdlKFxuICAgICAgICAgIHRvZGF5U3RhdHNEYXRhLnJldmVudWUsXG4gICAgICAgICAgeWVzdGVyZGF5U3RhdHNEYXRhLnJldmVudWVcbiAgICAgICAgKSxcbiAgICAgICAgb3JkZXJzQ2hhbmdlOiB0aGlzLmNhbGN1bGF0ZVBlcmNlbnRhZ2VDaGFuZ2UoXG4gICAgICAgICAgdG9kYXlTdGF0c0RhdGEub3JkZXJzLFxuICAgICAgICAgIHllc3RlcmRheVN0YXRzRGF0YS5vcmRlcnNcbiAgICAgICAgKSxcbiAgICAgICAgYXZnT3JkZXJWYWx1ZUNoYW5nZTogdGhpcy5jYWxjdWxhdGVQZXJjZW50YWdlQ2hhbmdlKFxuICAgICAgICAgIHRvZGF5QXZnT3JkZXJWYWx1ZSxcbiAgICAgICAgICB5ZXN0ZXJkYXlBdmdPcmRlclZhbHVlXG4gICAgICAgICksXG4gICAgICAgIGN1c3RvbWVyc0NoYW5nZTogdGhpcy5jYWxjdWxhdGVQZXJjZW50YWdlQ2hhbmdlKFxuICAgICAgICAgIHRvZGF5U3RhdHNEYXRhLmN1c3RvbWVycy5zaXplLFxuICAgICAgICAgIHllc3RlcmRheVN0YXRzRGF0YS5jdXN0b21lcnMuc2l6ZVxuICAgICAgICApLFxuICAgICAgfTtcblxuICAgICAgLy8gLS0tIDIuIEludmVudG9yeSBBbGVydHMgLS0tXG4gICAgICBjb25zdCBhdmFpbGFibGVQcm9kdWN0c1Jlc3BvbnNlID1cbiAgICAgICAgYXdhaXQgcG9zU2VydmljZS5nZXRBdmFpbGFibGVQcm9kdWN0c0ZvclNhbGUoKTtcbiAgICAgIGlmICghYXZhaWxhYmxlUHJvZHVjdHNSZXNwb25zZS5zdWNjZXNzIHx8ICFhdmFpbGFibGVQcm9kdWN0c1Jlc3BvbnNlLmRhdGEpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ291bGQgbm90IGZldGNoIGF2YWlsYWJsZSBwcm9kdWN0cyBmb3IgaW52ZW50b3J5IGFsZXJ0cy5cIik7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGludmVudG9yeUFsZXJ0czogSW52ZW50b3J5QWxlcnRbXSA9IFtdO1xuICAgICAgYXZhaWxhYmxlUHJvZHVjdHNSZXNwb25zZS5kYXRhLmZvckVhY2goKHByb2R1Y3QpID0+IHtcbiAgICAgICAgcHJvZHVjdC52YXJpYW50cy5mb3JFYWNoKCh2YXJpYW50KSA9PiB7XG4gICAgICAgICAgaWYgKHZhcmlhbnQudG90YWxTdG9jayA8PSBsb3dTdG9ja1RocmVzaG9sZCkge1xuICAgICAgICAgICAgaW52ZW50b3J5QWxlcnRzLnB1c2goe1xuICAgICAgICAgICAgICBtb2RlbDogcHJvZHVjdC5wcm9kdWN0TmFtZSxcbiAgICAgICAgICAgICAgdmFyaWFudDogYCR7dmFyaWFudC5zdG9yYWdlQ2FwYWNpdHl9ICR7dmFyaWFudC5jb2xvck5hbWV9YCxcbiAgICAgICAgICAgICAgc3RvY2s6IHZhcmlhbnQudG90YWxTdG9jayxcbiAgICAgICAgICAgICAgc3RhdHVzOiB2YXJpYW50LnRvdGFsU3RvY2sgPT09IDAgPyBcIm91dFwiIDogXCJsb3dcIixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgLy8gLS0tIDMuIFRvcCBTZWxsaW5nIFByb2R1Y3RzIFRvZGF5IC0tLVxuICAgICAgLy8gVXNpbmcgY29sbGVjdGlvbkdyb3VwIHF1ZXJ5IG9uIG9yZGVyIGl0ZW1zXG4gICAgICBjb25zdCBpdGVtc1JlZiA9IGNvbGxlY3Rpb25Hcm91cChkYiwgU1VCQ09MTEVDVElPTlMuSVRFTVMpO1xuICAgICAgY29uc3QgaXRlbXNRdWVyeSA9IHF1ZXJ5KFxuICAgICAgICBpdGVtc1JlZixcbiAgICAgICAgd2hlcmUoXCJjcmVhdGVkQXRcIiwgXCI+PVwiLCBUaW1lc3RhbXAuZnJvbURhdGUoc3RhcnRPZlRvZGF5KSksXG4gICAgICAgIHdoZXJlKFwiY3JlYXRlZEF0XCIsIFwiPD1cIiwgVGltZXN0YW1wLmZyb21EYXRlKGVuZE9mVG9kYXkpKVxuICAgICAgKTtcbiAgICAgIGNvbnN0IGl0ZW1zU25hcHNob3QgPSBhd2FpdCBnZXREb2NzKGl0ZW1zUXVlcnkpO1xuXG4gICAgICBjb25zdCBwcm9kdWN0U2FsZXMgPSBuZXcgTWFwPFxuICAgICAgICBzdHJpbmcsXG4gICAgICAgIHsgbmFtZTogc3RyaW5nOyBzb2xkOiBudW1iZXI7IHJldmVudWU6IG51bWJlciB9XG4gICAgICA+KCk7XG5cbiAgICAgIGl0ZW1zU25hcHNob3QuZG9jcy5mb3JFYWNoKChkb2MpID0+IHtcbiAgICAgICAgY29uc3QgaXRlbSA9IGRvYy5kYXRhKCkgYXMgRmlyZWJhc2VTYWxlc09yZGVySXRlbTtcblxuICAgICAgICAvLyBEZWZlbnNpdmUgY2hlY2s6IEVuc3VyZSB0aGUgaXRlbSBhbmQgaXRzIGtleSBmaWVsZHMgYXJlIHZhbGlkXG4gICAgICAgIGlmICghaXRlbSB8fCAhaXRlbS52YXJpYW50SWQgfHwgIWl0ZW0ucHJvZHVjdE5hbWUpIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oXCJTa2lwcGluZyBtYWxmb3JtZWQgb3JkZXIgaXRlbSBmcm9tIEZpcmVzdG9yZTpcIiwgZG9jLmlkKTtcbiAgICAgICAgICByZXR1cm47IC8vIFNraXAgdGhpcyBkb2N1bWVudFxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qga2V5ID0gaXRlbS52YXJpYW50SWQ7XG4gICAgICAgIGNvbnN0IG5hbWUgPSBgJHtpdGVtLnByb2R1Y3ROYW1lfSAke2l0ZW0uc3RvcmFnZUNhcGFjaXR5IHx8IFwiXCJ9YDtcblxuICAgICAgICBpZiAoIXByb2R1Y3RTYWxlcy5oYXMoa2V5KSkge1xuICAgICAgICAgIHByb2R1Y3RTYWxlcy5zZXQoa2V5LCB7IG5hbWU6IG5hbWUsIHNvbGQ6IDAsIHJldmVudWU6IDAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBwcm9kdWN0ID0gcHJvZHVjdFNhbGVzLmdldChrZXkpITtcblxuICAgICAgICAvLyBVc2UgZGVmYXVsdCB2YWx1ZSAwIGlmIHF1YW50aXR5IG9yIGZpbmFsUHJpY2UgYXJlIG1pc3NpbmcvZmFsc3lcbiAgICAgICAgcHJvZHVjdC5zb2xkICs9IGl0ZW0ucXVhbnRpdHkgfHwgMDtcbiAgICAgICAgcHJvZHVjdC5yZXZlbnVlICs9IGl0ZW0uZmluYWxQcmljZSB8fCAwO1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHRvcFByb2R1Y3RzOiBUb3BQcm9kdWN0W10gPSBBcnJheS5mcm9tKHByb2R1Y3RTYWxlcy52YWx1ZXMoKSlcbiAgICAgICAgLnNvcnQoKGEsIGIpID0+IGIucmV2ZW51ZSAtIGEucmV2ZW51ZSlcbiAgICAgICAgLnNsaWNlKDAsIDUpOyAvLyBHZXQgdG9wIDVcblxuICAgICAgLy8gLS0tIDQuIE1vbnRobHkgUmV2ZW51ZSAtLS1cbiAgICAgIGNvbnN0IG1vbnRobHlTdGF0cyA9IGF3YWl0IHRoaXMuZ2V0U3RhdHNGb3JEYXRlUmFuZ2UoXG4gICAgICAgIHN0YXJ0T2ZNb250aCxcbiAgICAgICAgZW5kT2ZNb250aFxuICAgICAgKTtcbiAgICAgIGNvbnN0IG1vbnRobHlSZXZlbnVlOiBNb250aGx5UmV2ZW51ZSA9IHtcbiAgICAgICAgY3VycmVudDogbW9udGhseVN0YXRzLnJldmVudWUsXG4gICAgICAgIHRhcmdldDogbW9udGhseVRhcmdldCxcbiAgICAgICAgcHJvZ3Jlc3M6XG4gICAgICAgICAgbW9udGhseVRhcmdldCA+IDAgPyAobW9udGhseVN0YXRzLnJldmVudWUgLyBtb250aGx5VGFyZ2V0KSAqIDEwMCA6IDAsXG4gICAgICB9O1xuXG4gICAgICAvLyAtLS0gQ29tYmluZSBhbGwgZGF0YSAtLS1cbiAgICAgIGNvbnN0IGRhc2hib2FyZERhdGE6IERhc2hib2FyZERhdGEgPSB7XG4gICAgICAgIHRvZGF5U3RhdHMsXG4gICAgICAgIGludmVudG9yeUFsZXJ0cyxcbiAgICAgICAgdG9wUHJvZHVjdHMsXG4gICAgICAgIG1vbnRobHlSZXZlbnVlLFxuICAgICAgfTtcblxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogZGFzaGJvYXJkRGF0YSB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXR1cm4gdGhpcy5oYW5kbGVFcnJvcihlcnJvcik7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBjb25zdCBkYXNoYm9hcmRTZXJ2aWNlID0gbmV3IERhc2hib2FyZFNlcnZpY2UoKTsgIl0sIm5hbWVzIjpbImNvbGxlY3Rpb24iLCJjb2xsZWN0aW9uR3JvdXAiLCJxdWVyeSIsIndoZXJlIiwiZ2V0RG9jcyIsIlRpbWVzdGFtcCIsImRiIiwiQmFzZVNlcnZpY2UiLCJwb3NTZXJ2aWNlIiwiQ09MTEVDVElPTlMiLCJTVUJDT0xMRUNUSU9OUyIsIkRhc2hib2FyZFNlcnZpY2UiLCJnZXRTdGF0c0ZvckRhdGVSYW5nZSIsInN0YXJ0RGF0ZSIsImVuZERhdGUiLCJvcmRlcnNSZWYiLCJTQUxFU19PUkRFUlMiLCJxIiwiZnJvbURhdGUiLCJzbmFwc2hvdCIsInJldmVudWUiLCJjdXN0b21lcklkcyIsIlNldCIsImRvY3MiLCJmb3JFYWNoIiwiZG9jIiwib3JkZXIiLCJkYXRhIiwidG90YWxBbW91bnQiLCJjdXN0b21lcklkIiwiYWRkIiwiY3VzdG9tZXJJbmZvIiwicGhvbmUiLCJvcmRlcnMiLCJzaXplIiwiY3VzdG9tZXJzIiwiY2FsY3VsYXRlUGVyY2VudGFnZUNoYW5nZSIsImN1cnJlbnQiLCJwcmV2aW91cyIsImdldERhc2hib2FyZFN0YXRzIiwibG93U3RvY2tUaHJlc2hvbGQiLCJtb250aGx5VGFyZ2V0Iiwibm93IiwiRGF0ZSIsInN0YXJ0T2ZUb2RheSIsImdldEZ1bGxZZWFyIiwiZ2V0TW9udGgiLCJnZXREYXRlIiwiZW5kT2ZUb2RheSIsInllc3RlcmRheSIsInNldERhdGUiLCJzdGFydE9mWWVzdGVyZGF5IiwiZW5kT2ZZZXN0ZXJkYXkiLCJzdGFydE9mTW9udGgiLCJlbmRPZk1vbnRoIiwidG9kYXlTdGF0c0RhdGEiLCJ5ZXN0ZXJkYXlTdGF0c0RhdGEiLCJQcm9taXNlIiwiYWxsIiwidG9kYXlBdmdPcmRlclZhbHVlIiwieWVzdGVyZGF5QXZnT3JkZXJWYWx1ZSIsInRvZGF5U3RhdHMiLCJhdmdPcmRlclZhbHVlIiwicmV2ZW51ZUNoYW5nZSIsIm9yZGVyc0NoYW5nZSIsImF2Z09yZGVyVmFsdWVDaGFuZ2UiLCJjdXN0b21lcnNDaGFuZ2UiLCJhdmFpbGFibGVQcm9kdWN0c1Jlc3BvbnNlIiwiZ2V0QXZhaWxhYmxlUHJvZHVjdHNGb3JTYWxlIiwic3VjY2VzcyIsIkVycm9yIiwiaW52ZW50b3J5QWxlcnRzIiwicHJvZHVjdCIsInZhcmlhbnRzIiwidmFyaWFudCIsInRvdGFsU3RvY2siLCJwdXNoIiwibW9kZWwiLCJwcm9kdWN0TmFtZSIsInN0b3JhZ2VDYXBhY2l0eSIsImNvbG9yTmFtZSIsInN0b2NrIiwic3RhdHVzIiwiaXRlbXNSZWYiLCJJVEVNUyIsIml0ZW1zUXVlcnkiLCJpdGVtc1NuYXBzaG90IiwicHJvZHVjdFNhbGVzIiwiTWFwIiwiaXRlbSIsInZhcmlhbnRJZCIsImNvbnNvbGUiLCJ3YXJuIiwiaWQiLCJrZXkiLCJuYW1lIiwiaGFzIiwic2V0Iiwic29sZCIsImdldCIsInF1YW50aXR5IiwiZmluYWxQcmljZSIsInRvcFByb2R1Y3RzIiwiQXJyYXkiLCJmcm9tIiwidmFsdWVzIiwic29ydCIsImEiLCJiIiwic2xpY2UiLCJtb250aGx5U3RhdHMiLCJtb250aGx5UmV2ZW51ZSIsInRhcmdldCIsInByb2dyZXNzIiwiZGFzaGJvYXJkRGF0YSIsImVycm9yIiwiaGFuZGxlRXJyb3IiLCJjb25zdHJ1Y3RvciIsImRhc2hib2FyZFNlcnZpY2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/lib/firebase/services/dashboard.service.ts\n"));

/***/ })

});