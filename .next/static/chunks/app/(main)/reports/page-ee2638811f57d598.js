(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[646],{5197:function(e,t,r){Promise.resolve().then(r.bind(r,4516))},4516:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return V}});var s=r(7437),a=r(2265),n=r(9820),o=r(7168),d=r(5252),l=r(525),c=r(4794),i=r(5863),u=r(2451),m=r(1047),f=r(407),h=r(5978),p=r(6410),g=r(8086),x=r(3976),y=r(3541),v=r(6639),j=r(92),b=r(3161);let N=(e,t)=>({id:e,reportDate:e,reportTimestamp:t,generatedAt:h.EK.now(),generatedBy:"system",isFinalized:!1,salesMetrics:{totalOrders:0,completedOrders:0,cancelledOrders:0,pendingOrders:0,totalRevenue:0,totalQuantitySold:0,averageOrderValue:0,paymentMethods:{},hourlyBreakdown:Array.from({length:24},(e,t)=>({hour:t,orders:0,revenue:0}))},productPerformance:{totalProductsSold:0,uniqueProductsSold:0,topProducts:[],categoryBreakdown:{},topVariants:[]},staffPerformance:{activeStaff:0,staffMetrics:[],topSalesPerson:{staffId:"",staffName:"",revenue:0}},customerMetrics:{totalCustomers:0,newCustomers:0,returningCustomers:0,vipCustomers:0,customerSegments:{}},inventoryMetrics:{itemsSold:0,stockMovements:0,lowStockAlerts:0,outOfStockItems:0,topMovingItems:[]},returnMetrics:{totalReturns:0,returnValue:0,returnRate:0,exchangeCount:0,refundAmount:0,returnReasons:{}},financialSummary:{grossRevenue:0,discountAmount:0,taxAmount:0,netRevenue:0,totalCost:0,grossProfit:0,grossProfitMargin:0},comparativeMetrics:{previousDay:{revenueGrowth:0,orderGrowth:0,customerGrowth:0},previousWeek:{revenueGrowth:0,orderGrowth:0,averageOrderValueGrowth:0},monthToDate:{totalRevenue:0,totalOrders:0,targetProgress:0}},operationalMetrics:{averageItemsPerOrder:0,ordersPerStaff:0,revenuePerStaff:0,peakHours:[]},qualityMetrics:{customerComplaints:0,warrantyIssues:0,productDefects:0},createdAt:h.EK.now(),updatedAt:h.EK.now(),createdBy:"system",updatedBy:"system"});class w extends g.bQ{async getOrGenerateDailyReport(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"system",r=(0,y.Z)(e,"yyyy-MM-dd"),s=(0,h.JU)(p.db,this.collectionName,r);try{let a=await (0,h.QT)(s);if(a.exists())return console.log("Fetched daily report for ".concat(r," from cache.")),{success:!0,data:{id:a.id,...a.data()}};console.log("Report for ".concat(r," not found. Generating new report..."));let n=N(r,h.EK.fromDate(e));n.generatedBy=t,n.createdBy=t,n.updatedBy=t;let o=(0,v.Z)(e),d=(0,j.Z)(e),l=(0,h.hJ)(p.db,x.Ul.SALES_ORDERS),c=(0,h.IO)(l,(0,h.ar)("orderDate",">=",h.EK.fromDate(o)),(0,h.ar)("orderDate","<=",h.EK.fromDate(d))),i=(await (0,h.PL)(c)).docs.map(e=>({id:e.id,...e.data()}));if(0===i.length)return await (0,h.pl)(s,n),{success:!0,data:n};let u=[];for(let e of i){let t=(0,h.hJ)(p.db,x.Ul.SALES_ORDERS,e.id,x.N9.ORDER_ITEMS);(await (0,h.PL)(t)).forEach(e=>{u.push({id:e.id,...e.data()})})}let m=i.filter(e=>"completed"===e.status),f=n.salesMetrics;f.totalOrders=i.length,f.completedOrders=m.length,f.cancelledOrders=i.filter(e=>"cancelled"===e.status).length,f.pendingOrders=i.filter(e=>e.status.startsWith("pending")).length,f.totalRevenue=m.reduce((e,t)=>e+t.totalAmount,0),f.totalQuantitySold=m.reduce((e,t)=>e+t.totalQuantity,0),f.averageOrderValue=f.completedOrders>0?f.totalRevenue/f.completedOrders:0,i.forEach(e=>{let t=e.paymentMethod;f.paymentMethods[t]||(f.paymentMethods[t]={orderCount:0,totalAmount:0,percentage:0}),f.paymentMethods[t].orderCount++,"completed"===e.status&&(f.paymentMethods[t].totalAmount+=e.totalAmount);let r=(0,b.Z)(e.orderDate.toDate());f.hourlyBreakdown[r].orders++,"completed"===e.status&&(f.hourlyBreakdown[r].revenue+=e.totalAmount)}),f.totalRevenue>0&&Object.keys(f.paymentMethods).forEach(e=>{f.paymentMethods[e].percentage=f.paymentMethods[e].totalAmount/f.totalRevenue*100});let g=n.financialSummary;g.grossRevenue=m.reduce((e,t)=>e+t.subtotalAmount,0),g.discountAmount=m.reduce((e,t)=>e+t.discountAmount,0),g.taxAmount=m.reduce((e,t)=>e+t.taxAmount,0),g.netRevenue=m.reduce((e,t)=>e+t.totalAmount,0),g.totalCost=u.filter(e=>m.some(t=>t.id===e.salesOrderId)).reduce((e,t)=>e+t.unitCost,0),g.grossProfit=g.grossRevenue-g.totalCost,g.grossProfitMargin=g.grossRevenue>0?g.grossProfit/g.grossRevenue*100:0;let y=n.productPerformance,w=u.filter(e=>m.some(t=>t.id===e.salesOrderId));y.totalProductsSold=w.length;let P={},S={};w.forEach(e=>{P[e.productId]||(P[e.productId]={productId:e.productId,productName:e.productName,quantitySold:0,revenue:0,profit:0}),P[e.productId].quantitySold+=e.quantity,P[e.productId].revenue+=e.finalPrice,P[e.productId].profit+=e.finalPrice-e.unitCost,S[e.variantId]||(S[e.variantId]={variantId:e.variantId,productName:e.productName,colorName:e.colorName,storageCapacity:e.storageCapacity,quantitySold:0,revenue:0}),S[e.variantId].quantitySold+=e.quantity,S[e.variantId].revenue+=e.finalPrice}),y.uniqueProductsSold=Object.keys(P).length,y.topProducts=Object.values(P).sort((e,t)=>t.revenue-e.revenue).slice(0,10).map(e=>({...e,profitMargin:e.revenue>0?e.profit/e.revenue*100:0})),y.topVariants=Object.values(S).sort((e,t)=>t.revenue-e.revenue).slice(0,10);let O=n.staffPerformance,I={};if(m.forEach(e=>{I[e.staffId]||(I[e.staffId]={staffId:e.staffId,staffName:e.staffName||"Unknown",ordersProcessed:0,revenue:0,customers:new Set});let t=I[e.staffId];t.ordersProcessed++,t.revenue+=e.totalAmount,e.customerId&&t.customers.add(e.customerId)}),O.activeStaff=Object.keys(I).length,O.staffMetrics=Object.values(I).map(e=>({staffId:e.staffId,staffName:e.staffName,ordersProcessed:e.ordersProcessed,revenue:e.revenue,customerCount:e.customers.size,averageOrderValue:e.ordersProcessed>0?e.revenue/e.ordersProcessed:0})),O.staffMetrics.length>0){let e=Object.values(I).sort((e,t)=>t.revenue-e.revenue)[0];O.topSalesPerson={staffId:e.staffId,staffName:e.staffName,revenue:e.revenue}}let M=n.customerMetrics,R=new Set;return m.forEach(e=>{e.customerId&&R.add(e.customerId)}),M.totalCustomers=R.size,await (0,h.pl)(s,n,{merge:!0}),{success:!0,data:n}}catch(e){return console.error("Error getting or generating daily report for ".concat(r,":"),e),this.handleError(e)}}async generateDailyReport(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"system";try{let r=(0,y.Z)(e,"yyyy-MM-dd"),s=h.EK.fromDate(e),a=N(r,s);a.generatedBy=t,a.createdBy=t,a.updatedBy=t;let n=(0,v.Z)(e),o=(0,j.Z)(e),d=(0,h.hJ)(p.db,x.Ul.SALES_ORDERS),l=(0,h.IO)(d,(0,h.ar)("orderDate",">=",h.EK.fromDate(n)),(0,h.ar)("orderDate","<=",h.EK.fromDate(o))),c=(await (0,h.PL)(l)).docs.map(e=>({id:e.id,...e.data()}));if(0===c.length){let e=(0,h.JU)(p.db,this.collectionName,r);return await (0,h.pl)(e,a),{success:!0,data:a}}let i=[];for(let e of c){let t=(0,h.hJ)(p.db,x.Ul.SALES_ORDERS,e.id,x.N9.ORDER_ITEMS);(await (0,h.PL)(t)).forEach(e=>{i.push({id:e.id,...e.data()})})}let u=c.filter(e=>"completed"===e.status),m=a.salesMetrics;m.totalOrders=c.length,m.completedOrders=u.length,m.cancelledOrders=c.filter(e=>"cancelled"===e.status).length,m.pendingOrders=c.filter(e=>e.status.startsWith("pending")).length,m.totalRevenue=u.reduce((e,t)=>e+t.totalAmount,0),m.totalQuantitySold=u.reduce((e,t)=>e+t.totalQuantity,0),m.averageOrderValue=m.completedOrders>0?m.totalRevenue/m.completedOrders:0,c.forEach(e=>{let t=e.paymentMethod;m.paymentMethods[t]||(m.paymentMethods[t]={orderCount:0,totalAmount:0,percentage:0}),m.paymentMethods[t].orderCount++,"completed"===e.status&&(m.paymentMethods[t].totalAmount+=e.totalAmount);let r=(0,b.Z)(e.orderDate.toDate());m.hourlyBreakdown[r].orders++,"completed"===e.status&&(m.hourlyBreakdown[r].revenue+=e.totalAmount)}),m.totalRevenue>0&&Object.keys(m.paymentMethods).forEach(e=>{m.paymentMethods[e].percentage=m.paymentMethods[e].totalAmount/m.totalRevenue*100});let f=a.financialSummary;f.grossRevenue=u.reduce((e,t)=>e+t.subtotalAmount,0),f.discountAmount=u.reduce((e,t)=>e+t.discountAmount,0),f.taxAmount=u.reduce((e,t)=>e+t.taxAmount,0),f.netRevenue=u.reduce((e,t)=>e+t.totalAmount,0),f.totalCost=i.filter(e=>u.some(t=>t.id===e.salesOrderId)).reduce((e,t)=>e+t.unitCost,0),f.grossProfit=f.grossRevenue-f.totalCost,f.grossProfitMargin=f.grossRevenue>0?f.grossProfit/f.grossRevenue*100:0;let g=a.productPerformance,w=i.filter(e=>u.some(t=>t.id===e.salesOrderId));g.totalProductsSold=w.length;let P={},S={};w.forEach(e=>{P[e.productId]||(P[e.productId]={productId:e.productId,productName:e.productName,quantitySold:0,revenue:0,profit:0}),P[e.productId].quantitySold+=e.quantity,P[e.productId].revenue+=e.finalPrice,P[e.productId].profit+=e.finalPrice-e.unitCost,S[e.variantId]||(S[e.variantId]={variantId:e.variantId,productName:e.productName,colorName:e.colorName,storageCapacity:e.storageCapacity,quantitySold:0,revenue:0}),S[e.variantId].quantitySold+=e.quantity,S[e.variantId].revenue+=e.finalPrice}),g.uniqueProductsSold=Object.keys(P).length,g.topProducts=Object.values(P).sort((e,t)=>t.revenue-e.revenue).slice(0,10).map(e=>({...e,profitMargin:e.revenue>0?e.profit/e.revenue*100:0,profit:e.profit})),g.topVariants=Object.values(S).sort((e,t)=>t.revenue-e.revenue).slice(0,10);let O=a.staffPerformance,I={};if(u.forEach(e=>{I[e.staffId]||(I[e.staffId]={staffId:e.staffId,staffName:e.staffName||"Unknown",ordersProcessed:0,revenue:0,customers:new Set});let t=I[e.staffId];t.ordersProcessed++,t.revenue+=e.totalAmount,e.customerId&&t.customers.add(e.customerId)}),O.activeStaff=Object.keys(I).length,O.staffMetrics=Object.values(I).map(e=>({staffId:e.staffId,staffName:e.staffName,ordersProcessed:e.ordersProcessed,revenue:e.revenue,customerCount:e.customers.size,averageOrderValue:e.ordersProcessed>0?e.revenue/e.ordersProcessed:0})),O.staffMetrics.length>0){let e=Object.values(I).sort((e,t)=>t.revenue-e.revenue)[0];O.topSalesPerson={staffId:e.staffId,staffName:e.staffName,revenue:e.revenue}}let M=a.customerMetrics,R=new Set;u.forEach(e=>{e.customerId&&R.add(e.customerId)}),M.totalCustomers=R.size;let E=(0,h.JU)(p.db,this.collectionName,r);return await (0,h.pl)(E,a,{merge:!0}),{success:!0,data:a}}catch(e){return console.error("Error generating daily report:",e),this.handleError(e)}}async getMonthlyReport(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{let r=new Date(e,t-1,1),s=new Date(e,t,0),a=(0,h.hJ)(p.db,this.collectionName),n=(0,h.IO)(a,(0,h.ar)("reportTimestamp",">=",h.EK.fromDate(r)),(0,h.ar)("reportTimestamp","<=",h.EK.fromDate(s))),o=await (0,h.PL)(n);if(o.empty)return{success:!1,error:"Kh\xf4ng c\xf3 dữ liệu b\xe1o c\xe1o cho th\xe1ng ".concat(t,"/").concat(e,"."),errorCode:"NO_DATA"};let d=o.docs.map(e=>e.data()),l={reportMonth:"".concat(e,"-").concat(t.toString().padStart(2,"0")),totalDaysReported:d.length,totalRevenue:0,totalOrders:0,totalQuantitySold:0,grossProfit:0,topProducts:new Map,staffPerformance:new Map};for(let e of d)l.totalRevenue+=e.salesMetrics.totalRevenue,l.totalOrders+=e.salesMetrics.completedOrders,l.totalQuantitySold+=e.salesMetrics.totalQuantitySold,l.grossProfit+=e.financialSummary.grossProfit,e.productPerformance.topProducts.forEach(e=>{let t=l.topProducts.get(e.productId);t?(t.quantitySold+=e.quantitySold,t.revenue+=e.revenue):l.topProducts.set(e.productId,{productName:e.productName,quantitySold:e.quantitySold,revenue:e.revenue})}),e.staffPerformance.staffMetrics.forEach(e=>{let t=l.staffPerformance.get(e.staffId);t?(t.revenue+=e.revenue,t.ordersProcessed+=e.ordersProcessed):l.staffPerformance.set(e.staffId,{staffName:e.staffName,revenue:e.revenue,ordersProcessed:e.ordersProcessed})});let c={...l,topProducts:Array.from(l.topProducts.values()).sort((e,t)=>t.revenue-e.revenue).slice(0,10),staffPerformance:Array.from(l.staffPerformance.values()).sort((e,t)=>t.revenue-e.revenue)};return{success:!0,data:c}}catch(r){return console.error("Error generating monthly report for ".concat(t,"/").concat(e,":"),r),this.handleError(r)}}constructor(){super(x.Ul.REPORTS)}}let P=new w;var S=r(2381),O=r(1488),I=r(3448);function M(e){let{className:t,classNames:r,showOutsideDays:a=!0,...n}=e;return(0,s.jsx)(O._W,{showOutsideDays:a,className:(0,I.cn)("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,I.cn)((0,S.d)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,I.cn)((0,S.d)({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...r},components:{IconLeft:e=>{let{...t}=e;return(0,s.jsx)(u.Z,{className:"h-4 w-4"})},IconRight:e=>{let{...t}=e;return(0,s.jsx)(f.Z,{className:"h-4 w-4"})}},...n})}M.displayName="Calendar";var R=r(7312);let E=R.fC,Z=R.xz,A=a.forwardRef((e,t)=>{let{className:r,align:a="center",sideOffset:n=4,...o}=e;return(0,s.jsx)(R.h_,{children:(0,s.jsx)(R.VY,{ref:t,align:a,sideOffset:n,className:(0,I.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r),...o})})});A.displayName=R.VY.displayName;var D=r(1559),C=r(5721),k=r(5463),_=r(8265);function V(){let[e,t]=(0,a.useState)("daily"),[r,h]=(0,a.useState)(null),[p,g]=(0,a.useState)(new Date),[x,v]=(0,a.useState)(null),[j,b]=(0,a.useState)((0,D.Z)(new Date)),[N,w]=(0,a.useState)(!0),[O,I]=(0,a.useState)(null);(0,a.useEffect)(()=>{(async()=>{try{if(w(!0),I(null),"daily"===e){v(null);let e=await P.getOrGenerateDailyReport(p);e.success&&e.data?h(e.data):(I(e.error||"Kh\xf4ng thể tải b\xe1o c\xe1o ng\xe0y."),h(null))}else if("monthly"===e){h(null);let e=j.getFullYear(),t=j.getMonth()+1,r=await P.getMonthlyReport(e,t);r.success&&r.data?v(r.data):(I(r.error||"Kh\xf4ng thể tải b\xe1o c\xe1o th\xe1ng ".concat(t,"/").concat(e,".")),v(null))}}catch(e){console.error(e),I("Đ\xe3 xảy ra lỗi khi tạo b\xe1o c\xe1o.")}finally{w(!1)}})()},[p,j,e]);let R=e=>{g(t=>(0,C.Z)(t,e))},V=e=>{b(t=>(0,k.Z)(t,e))},z=()=>{if(!r||0===r.salesMetrics.totalOrders)return(0,s.jsxs)("div",{className:"text-center text-gray-500 py-10",children:[(0,s.jsx)("p",{className:"text-xl font-bold",children:"Kh\xf4ng c\xf3 dữ liệu"}),(0,s.jsxs)("p",{children:["Kh\xf4ng c\xf3 đơn h\xe0ng n\xe0o trong ng\xe0y ",(0,y.Z)(p,"dd/MM/yyyy"),"."]})]});let{salesMetrics:e,financialSummary:t,productPerformance:a,staffPerformance:o}=r;return(0,s.jsxs)("div",{className:"space-y-6 mt-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,s.jsxs)(n.Zb,{children:[(0,s.jsxs)(n.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(n.ll,{className:"text-sm font-medium",children:"Tổng doanh thu"}),(0,s.jsx)(d.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsxs)(n.aY,{children:[(0,s.jsxs)("div",{className:"text-2xl font-bold",children:[e.totalRevenue.toLocaleString("vi-VN"),"₫"]}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:[e.completedOrders," đơn h\xe0ng th\xe0nh c\xf4ng"]})]})]}),(0,s.jsxs)(n.Zb,{children:[(0,s.jsxs)(n.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(n.ll,{className:"text-sm font-medium",children:"Lợi nhuận gộp"}),(0,s.jsx)(l.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsxs)(n.aY,{children:[(0,s.jsxs)("div",{className:"text-2xl font-bold",children:[t.grossProfit.toLocaleString("vi-VN"),"₫"]}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Bi\xean lợi nhuận ",t.grossProfitMargin.toFixed(2),"%"]})]})]}),(0,s.jsxs)(n.Zb,{children:[(0,s.jsxs)(n.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(n.ll,{className:"text-sm font-medium",children:"Sản phẩm đ\xe3 b\xe1n"}),(0,s.jsx)(c.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsxs)(n.aY,{children:[(0,s.jsxs)("div",{className:"text-2xl font-bold",children:[e.totalQuantitySold," chiếc"]}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:["tr\xean tổng số ",e.totalOrders," đơn h\xe0ng"]})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,s.jsxs)(n.Zb,{children:[(0,s.jsx)(n.Ol,{children:(0,s.jsx)(n.ll,{children:"Top sản phẩm b\xe1n chạy"})}),(0,s.jsx)(n.aY,{children:a.topProducts.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-2 border-b",children:[(0,s.jsxs)("p",{children:["#",t+1," ",e.productName]}),(0,s.jsxs)("p",{className:"font-bold",children:[e.revenue.toLocaleString("vi-VN"),"₫"]})]},e.productId))})]}),(0,s.jsxs)(n.Zb,{children:[(0,s.jsx)(n.Ol,{children:(0,s.jsx)(n.ll,{children:"Top nh\xe2n vi\xean xuất sắc"})}),(0,s.jsx)(n.aY,{children:o.staffMetrics.sort((e,t)=>t.revenue-e.revenue).map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-2 border-b",children:[(0,s.jsxs)("p",{children:["#",t+1," ",e.staffName]}),(0,s.jsxs)("p",{className:"font-bold",children:[e.revenue.toLocaleString("vi-VN"),"₫"]})]},e.staffId))})]})]})]})},q=()=>x?(0,s.jsxs)("div",{className:"space-y-6 mt-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,s.jsxs)(n.Zb,{children:[(0,s.jsxs)(n.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(n.ll,{className:"text-sm font-medium",children:"Tổng doanh thu th\xe1ng"}),(0,s.jsx)(d.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsxs)(n.aY,{children:[(0,s.jsxs)("div",{className:"text-2xl font-bold",children:[x.totalRevenue.toLocaleString("vi-VN"),"₫"]}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:[x.totalOrders," đơn h\xe0ng th\xe0nh c\xf4ng"]})]})]}),(0,s.jsxs)(n.Zb,{children:[(0,s.jsxs)(n.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(n.ll,{className:"text-sm font-medium",children:"Lợi nhuận gộp th\xe1ng"}),(0,s.jsx)(l.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsxs)(n.aY,{children:[(0,s.jsxs)("div",{className:"text-2xl font-bold",children:[x.grossProfit.toLocaleString("vi-VN"),"₫"]}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:["tr\xean ",x.totalDaysReported," ng\xe0y c\xf3 dữ liệu"]})]})]}),(0,s.jsxs)(n.Zb,{children:[(0,s.jsxs)(n.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(n.ll,{className:"text-sm font-medium",children:"Sản phẩm b\xe1n trong th\xe1ng"}),(0,s.jsx)(c.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsxs)(n.aY,{children:[(0,s.jsxs)("div",{className:"text-2xl font-bold",children:[x.totalQuantitySold," chiếc"]}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Top ",x.topProducts.length," sản phẩm b\xe1n chạy"]})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,s.jsxs)(n.Zb,{children:[(0,s.jsx)(n.Ol,{children:(0,s.jsx)(n.ll,{children:"Top sản phẩm th\xe1ng"})}),(0,s.jsx)(n.aY,{children:x.topProducts.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-2 border-b",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"font-semibold",children:["#",t+1," ",e.productName]}),(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:["Đ\xe3 b\xe1n: ",e.quantitySold]})]}),(0,s.jsxs)("p",{className:"font-bold",children:[e.revenue.toLocaleString("vi-VN"),"₫"]})]},e.productId))})]}),(0,s.jsxs)(n.Zb,{children:[(0,s.jsx)(n.Ol,{children:(0,s.jsx)(n.ll,{children:"Top nh\xe2n vi\xean th\xe1ng"})}),(0,s.jsx)(n.aY,{children:x.staffPerformance.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-2 border-b",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"font-semibold",children:["#",t+1," ",e.staffName]}),(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:[e.ordersProcessed," đơn h\xe0ng"]})]}),(0,s.jsxs)("p",{className:"font-bold",children:[e.revenue.toLocaleString("vi-VN"),"₫"]})]},e.staffId))})]})]})]}):(0,s.jsxs)("div",{className:"text-center text-gray-500 py-10",children:[(0,s.jsx)("p",{className:"text-xl font-bold",children:"Kh\xf4ng c\xf3 dữ liệu"}),(0,s.jsxs)("p",{children:["Kh\xf4ng c\xf3 b\xe1o c\xe1o n\xe0o được ghi nhận cho th\xe1ng ",(0,y.Z)(j,"MM/yyyy"),"."]})]});return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"B\xe1o c\xe1o thống k\xea"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Ph\xe2n t\xedch hiệu quả kinh doanh theo ng\xe0y, th\xe1ng, v\xe0 năm."})]}),"daily"===e?(0,s.jsxs)("div",{className:"flex items-center gap-2 mt-4 sm:mt-0",children:[(0,s.jsx)(S.z,{variant:"outline",size:"icon",onClick:()=>R(-1),children:(0,s.jsx)(u.Z,{className:"h-4 w-4"})}),(0,s.jsxs)(E,{children:[(0,s.jsx)(Z,{asChild:!0,children:(0,s.jsxs)(S.z,{variant:"outline",className:"w-[280px] justify-start text-left font-normal",children:[(0,s.jsx)(m.Z,{className:"mr-2 h-4 w-4"}),(0,y.Z)(p,"PPP",{locale:_.Z})]})}),(0,s.jsx)(A,{className:"w-auto p-0",children:(0,s.jsx)(M,{mode:"single",selected:p,onSelect:e=>{e&&g(e)},initialFocus:!0,disabled:e=>e>new Date||e<new Date("2023-01-01")})})]}),(0,s.jsx)(S.z,{variant:"outline",size:"icon",onClick:()=>R(1),disabled:(0,y.Z)(p,"yyyy-MM-dd")===(0,y.Z)(new Date,"yyyy-MM-dd"),children:(0,s.jsx)(f.Z,{className:"h-4 w-4"})})]}):"monthly"===e?(0,s.jsxs)("div",{className:"flex items-center gap-2 mt-4 sm:mt-0",children:[(0,s.jsx)(S.z,{variant:"outline",size:"icon",onClick:()=>V(-1),children:(0,s.jsx)(u.Z,{className:"h-4 w-4"})}),(0,s.jsx)("div",{className:"w-[280px] text-center font-semibold text-lg",children:(0,y.Z)(j,"MMMM yyyy",{locale:_.Z})}),(0,s.jsx)(S.z,{variant:"outline",size:"icon",onClick:()=>V(1),disabled:j.getMonth()===new Date().getMonth()&&j.getFullYear()===new Date().getFullYear(),children:(0,s.jsx)(f.Z,{className:"h-4 w-4"})})]}):null]}),(0,s.jsx)(o.mQ,{value:e,onValueChange:e=>t(e),children:(0,s.jsxs)(o.dr,{children:[(0,s.jsx)(o.SP,{value:"daily",children:"Theo ng\xe0y"}),(0,s.jsx)(o.SP,{value:"monthly",children:"Theo th\xe1ng"}),(0,s.jsx)(o.SP,{value:"yearly",disabled:!0,children:"Theo năm"})]})}),(()=>{if(N)return(0,s.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,s.jsx)(i.Z,{className:"h-12 w-12 animate-spin text-blue-600"})});if(O)return(0,s.jsxs)("div",{className:"text-center text-red-600 py-10",children:[(0,s.jsx)("p",{className:"text-xl font-bold",children:"Lỗi!"}),(0,s.jsx)("p",{children:O})]});switch(e){case"daily":return z();case"monthly":return q();case"yearly":return(0,s.jsx)("div",{className:"text-center py-10",children:"B\xe1o c\xe1o năm sẽ được ph\xe1t triển trong phi\xean bản sau."});default:return null}})()]})}},2381:function(e,t,r){"use strict";r.d(t,{d:function(){return l},z:function(){return c}});var s=r(7437),a=r(2265),n=r(7053),o=r(535),d=r(3448);let l=(0,o.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef((e,t)=>{let{className:r,variant:a,size:o,asChild:c=!1,...i}=e,u=c?n.g7:"button";return(0,s.jsx)(u,{className:(0,d.cn)(l({variant:a,size:o,className:r})),ref:t,...i})});c.displayName="Button"},7168:function(e,t,r){"use strict";r.d(t,{SP:function(){return c},dr:function(){return l},mQ:function(){return d},nU:function(){return i}});var s=r(7437),a=r(2265),n=r(271),o=r(3448);let d=n.fC,l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(n.aV,{ref:t,className:(0,o.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",r),...a})});l.displayName=n.aV.displayName;let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(n.xz,{ref:t,className:(0,o.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",r),...a})});c.displayName=n.xz.displayName;let i=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(n.VY,{ref:t,className:(0,o.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",r),...a})});i.displayName=n.VY.displayName}},function(e){e.O(0,[358,139,933,825,960,41,790,252,971,117,744],function(){return e(e.s=5197)}),_N_E=e.O()}]);